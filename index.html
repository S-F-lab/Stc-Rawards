<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="monetag" content="98616f02537817f6b0075b625265e337">
    <title>STC-REWARDS | Earn Crypto</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Firebase SDK (Legacy Compat Mode) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --accent: #8b5cf6;
            --dark: #0f172a;
            --darker: #0a0f1f;
            --card-bg: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header - Fixed Single Line Navigation */
        header {
            background: rgba(15, 23, 42, 0.98);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(99, 102, 241, 0.2);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            padding: 0;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            height: 60px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 800;
            font-size: 22px;
            color: var(--light);
            text-decoration: none;
            white-space: nowrap;
        }

        .logo i {
            color: var(--primary);
            background: linear-gradient(45deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .main-nav {
            display: flex;
            align-items: center;
            gap: 5px;
            flex: 1;
            justify-content: center;
            margin: 0 20px;
            overflow-x: auto;
            padding: 5px 0;
        }

        .main-nav::-webkit-scrollbar {
            display: none;
        }

        .nav-links {
            display: flex;
            gap: 5px;
            list-style: none;
            white-space: nowrap;
        }

        .nav-links a {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .nav-links a:hover {
            color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
            border-color: rgba(99, 102, 241, 0.3);
        }

        .nav-links a.active {
            background: rgba(99, 102, 241, 0.15);
            color: var(--primary);
            border-color: var(--primary);
        }

        .auth-buttons {
            display: flex;
            gap: 10px;
            white-space: nowrap;
        }

        /* Buttons */
        .btn {
            padding: 10px 18px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary), var(--accent));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #0da271;
        }

        .btn-mining {
            background: linear-gradient(45deg, #f59e0b, #f97316);
            color: white;
            font-weight: 700;
            padding: 12px 24px;
            font-size: 15px;
        }

        /* Hero Section */
        .hero {
            padding: 120px 0 60px;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.9));
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 80%, rgba(99, 102, 241, 0.1) 0%, transparent 50%);
        }

        .hero-content {
            max-width: 700px;
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 42px;
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--light), var(--primary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .hero p {
            font-size: 16px;
            color: #cbd5e1;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .hero-stats {
            display: flex;
            gap: 20px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            min-width: 130px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-label {
            color: #94a3b8;
            font-size: 13px;
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-3px);
            border-color: var(--primary);
        }

        .section-title {
            font-size: 32px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 40px;
            color: var(--light);
        }

        /* Features */
        .features {
            padding: 80px 0;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
        }

        .feature-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            font-size: 20px;
        }

        /* Mining Section */
        .mining-section {
            padding: 80px 0;
            background: var(--darker);
        }

        .mining-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: center;
        }

        .mining-status {
            position: relative;
        }

        .mining-timer {
            font-family: 'Inter', monospace;
            font-size: 56px;
            font-weight: 700;
            color: var(--warning);
            margin: 15px 0;
            text-align: center;
        }

        .progress-container {
            background: rgba(255, 255, 255, 0.1);
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(45deg, var(--warning), var(--primary));
            border-radius: 5px;
            width: 0%;
            transition: width 1s linear;
        }

        /* Ads Section */
        .ads-section {
            padding: 80px 0;
        }

        .ads-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .ad-card {
            text-align: center;
            padding: 20px;
        }

        .ad-reward {
            font-size: 20px;
            font-weight: 700;
            color: var(--warning);
            margin: 12px 0;
        }

        /* Dashboard */
        .dashboard {
            padding: 100px 0 60px;
            min-height: 100vh;
        }

        .user-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .user-info h2 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .user-info p {
            color: #94a3b8;
            font-size: 14px;
        }

        .balance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .balance-card {
            padding: 20px;
        }

        .balance-label {
            color: #94a3b8;
            font-size: 13px;
            margin-bottom: 8px;
        }

        .balance-amount {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .balance-value {
            color: var(--success);
            font-weight: 600;
            font-size: 14px;
        }

        /* Referral */
        .referral-section {
            padding: 50px 0;
        }

        .referral-code-box {
            background: linear-gradient(45deg, var(--primary-dark), var(--accent));
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            margin: 25px 0;
        }

        .referral-code {
            font-family: monospace;
            font-size: 24px;
            letter-spacing: 2px;
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
            display: inline-block;
        }

        /* Forms */
        .auth-form-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 100px 20px;
        }

        .auth-form {
            width: 100%;
            max-width: 450px;
            background: var(--card-bg);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-title {
            text-align: center;
            font-size: 24px;
            margin-bottom: 25px;
            color: var(--light);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            color: #94a3b8;
            font-size: 13px;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 12px 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--light);
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .divider {
            text-align: center;
            margin: 20px 0;
            position: relative;
            color: #64748b;
            font-size: 13px;
        }

        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
        }

        .divider span {
            background: var(--card-bg);
            padding: 0 12px;
            position: relative;
        }

        .btn-google {
            width: 100%;
            background: white;
            color: #333;
            justify-content: center;
        }

        .btn-google:hover {
            background: #f1f1f1;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            width: 100%;
            max-width: 450px;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 20px;
            cursor: pointer;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Footer */
        footer {
            background: var(--darker);
            padding: 50px 0 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-links h4 {
            margin-bottom: 15px;
            color: var(--light);
            font-size: 16px;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 8px;
        }

        .footer-links a {
            color: #94a3b8;
            text-decoration: none;
            font-size: 13px;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .copyright {
            text-align: center;
            padding-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #64748b;
            font-size: 12px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .nav-container {
                flex-wrap: wrap;
                height: auto;
                padding: 10px 0;
            }
            
            .logo {
                order: 1;
            }
            
            .main-nav {
                order: 3;
                flex: 100%;
                margin: 10px 0 0;
                justify-content: flex-start;
            }
            
            .auth-buttons {
                order: 2;
            }
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 32px;
            }
            
            .mining-container {
                grid-template-columns: 1fr;
            }
            
            .mining-timer {
                font-size: 42px;
            }
            
            .user-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .nav-links {
                gap: 3px;
            }
            
            .nav-links a {
                padding: 6px 10px;
                font-size: 13px;
            }
        }

        @media (max-width: 480px) {
            .hero-stats {
                gap: 10px;
            }
            
            .stat-box {
                min-width: 110px;
                padding: 12px;
            }
            
            .stat-value {
                font-size: 22px;
            }
            
            .btn {
                padding: 8px 14px;
                font-size: 13px;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 12px 16px;
            background: var(--success);
            color: white;
            border-radius: 8px;
            z-index: 3000;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            animation: slideIn 0.3s ease-out;
            max-width: 300px;
            font-size: 14px;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .notification.error {
            background: var(--danger);
        }

        .notification.warning {
            background: var(--warning);
        }

        .notification.info {
            background: var(--info);
        }

        /* Page Transitions */
        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        /* Loading Spinner */
        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Disabled state */
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Active mining indicator */
        .mining-active {
            background: linear-gradient(45deg, #10b981, #059669) !important;
        }

        /* Stats animation */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Withdrawal History Table */
        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
        }

        .history-table th {
            background: rgba(99, 102, 241, 0.1);
            padding: 15px;
            text-align: left;
            color: var(--primary);
            font-weight: 600;
            font-size: 14px;
        }

        .history-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 14px;
        }

        .history-table tr:last-child td {
            border-bottom: none;
        }

        .history-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-block;
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }

        .status-processing {
            background: rgba(59, 130, 246, 0.2);
            color: var(--info);
        }

        .status-completed {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .status-failed {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        /* Withdrawal History Page */
        .withdrawal-history-page {
            padding: 100px 0 60px;
        }

        .history-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--light);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .filter-btn.active {
            background: var(--primary);
            border-color: var(--primary);
        }

        .filter-btn:hover {
            background: rgba(99, 102, 241, 0.2);
        }

        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #94a3b8;
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Firebase User Profile */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--primary);
        }

        .profile-dropdown {
            position: relative;
        }

        .profile-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px 0;
            min-width: 200px;
            display: none;
            z-index: 100;
            margin-top: 10px;
        }

        .profile-dropdown:hover .profile-menu {
            display: block;
        }

        .profile-menu a {
            display: block;
            padding: 10px 20px;
            color: var(--light);
            text-decoration: none;
            font-size: 14px;
        }

        .profile-menu a:hover {
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
        }

        /* NEW STYLES FOR MINING PERSISTENCE */
        .mining-persistence-notice {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--warning);
            border-radius: 8px;
            padding: 10px 15px;
            margin-top: 15px;
            font-size: 13px;
            color: var(--warning);
        }
        
        /* NEW STYLES FOR TOKEN PAGE TABS */
        .token-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .token-tab {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            border-radius: 8px;
            color: #94a3b8;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .token-tab.active {
            background: var(--primary);
            color: white;
        }
        
        .token-tab:hover {
            background: rgba(99, 102, 241, 0.2);
        }
        
        .token-content {
            display: none;
        }
        
        .token-content.active {
            display: block;
        }
        
        .token-details {
            line-height: 1.6;
            color: #cbd5e1;
        }
        
        .token-details h3 {
            margin: 20px 0 10px;
            color: var(--light);
        }
        
        /* NEW: Attractive UL Styles */
        .attractive-ul {
            list-style: none;
            margin-left: 0;
            padding-left: 0;
        }
        
        .attractive-ul li {
            margin-bottom: 12px;
            padding-left: 25px;
            position: relative;
            line-height: 1.5;
        }
        
        .attractive-ul li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--success);
            font-weight: bold;
            background: rgba(16, 185, 129, 0.2);
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        .attractive-ul.warning li:before {
            content: "⚠";
            color: var(--warning);
            background: rgba(245, 158, 11, 0.2);
        }
        
        .attractive-ul.info li:before {
            content: "i";
            color: var(--info);
            background: rgba(59, 130, 246, 0.2);
            font-style: italic;
            font-weight: bold;
        }
        
        .attractive-ul.danger li:before {
            content: "!";
            color: var(--danger);
            background: rgba(239, 68, 68, 0.2);
        }
        
        .attractive-ul.primary li:before {
            content: "✦";
            color: var(--primary);
            background: rgba(99, 102, 241, 0.2);
        }
        
        /* Roadmap timeline */
        .roadmap-timeline {
            position: relative;
            padding-left: 30px;
            border-left: 2px solid var(--primary);
        }
        
        .roadmap-phase {
            margin-bottom: 30px;
            position: relative;
        }
        
        .roadmap-phase::before {
            content: '';
            position: absolute;
            left: -38px;
            top: 0;
            width: 30px;
            height: 30px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .roadmap-phase.completed::before {
            background: var(--success);
            content: '✓';
            color: white;
            font-size: 12px;
        }
        
        .roadmap-phase.current::before {
            background: var(--primary);
            content: '●';
            color: white;
            font-size: 20px;
        }
        
        .roadmap-phase.future::before {
            background: var(--accent);
            content: '☆';
            color: white;
        }

        /* Price fluctuation animation */
        .price-fluctuation {
            animation: pricePulse 3s infinite;
            position: relative;
        }

        @keyframes pricePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .price-note {
            font-size: 12px;
            color: #94a3b8;
            margin-top: 5px;
            font-style: italic;
        }

        /* Market conditions indicator */
        .market-indicator {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 8px;
            animation: marketPulse 4s infinite;
        }

        @keyframes marketPulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        .market-up {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .market-down {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        .market-stable {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }

        /* Growing number animation */
        .growing-number {
            animation: growNumber 5s ease-out infinite;
        }

        @keyframes growNumber {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* NEW: Withdrawal Options Styles */
        .withdrawal-options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .withdrawal-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .withdrawal-option:hover {
            background: rgba(99, 102, 241, 0.1);
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .withdrawal-option.selected {
            background: rgba(99, 102, 241, 0.15);
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.2);
        }
        
        .withdrawal-option i {
            font-size: 24px;
            margin-bottom: 10px;
            display: block;
        }
        
        .crypto-icon {
            width: 40px;
            height: 40px;
            margin: 0 auto 10px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }
        
        .usdt-bg { background: #26a17b; }
        .btc-bg { background: #f7931a; }
        .eth-bg { background: #627eea; }
        .usdc-bg { background: #2775ca; }
        .bank-bg { background: linear-gradient(45deg, #8b5cf6, #6366f1); }
        
        .withdrawal-fee {
            font-size: 12px;
            color: #94a3b8;
            margin-top: 5px;
        }
        
        .withdrawal-minimum {
            font-size: 11px;
            color: var(--warning);
            margin-top: 3px;
        }
        
        /* NEW: Bank Transfer Form */
        .bank-transfer-form {
            display: none;
        }
        
        .bank-transfer-form.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        .method-details {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            border-left: 3px solid var(--primary);
        }
        
        /* Coin Earn Rate Info */
        .coin-rate-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .rate-box {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 8px;
            padding: 10px 15px;
            text-align: center;
            min-width: 200px;
        }
        
        .rate-box h4 {
            color: var(--warning);
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .rate-box p {
            font-size: 13px;
            color: #cbd5e1;
        }
        
        /* Harder to Earn Notice */
        .hard-earn-notice {
            background: rgba(245, 158, 11, 0.15);
            border: 1px solid var(--warning);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .hard-earn-notice i {
            color: var(--warning);
            margin-right: 8px;
        }
        
        /* Progress Bar for Coin Collection */
        .coin-progress-container {
            background: rgba(255, 255, 255, 0.1);
            height: 8px;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .coin-progress-bar {
            height: 100%;
            background: linear-gradient(45deg, var(--warning), #f97316);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s;
        }

        /* NEW: Daily Login System Styles */
        .daily-login-section {
            padding: 100px 0 60px;
            min-height: 100vh;
        }
        
        .daily-login-card {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
            border: 2px solid var(--primary);
        }
        
        .streak-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin: 25px 0;
        }
        
        .streak-count {
            font-size: 48px;
            font-weight: 800;
            color: var(--warning);
            text-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
        }
        
        .streak-label {
            font-size: 14px;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .flame-animation {
            animation: flame 2s infinite;
            font-size: 40px;
            color: var(--warning);
        }
        
        @keyframes flame {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .streak-calendar {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin: 25px 0;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .day-box {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-weight: 600;
            font-size: 12px;
            position: relative;
            transition: all 0.3s;
        }
        
        .day-box.completed {
            background: linear-gradient(45deg, var(--success), #059669);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }
        
        .day-box.current {
            background: linear-gradient(45deg, var(--warning), #f97316);
            color: white;
            animation: pulse 1.5s infinite;
            border: 2px solid white;
        }
        
        .day-box.future {
            background: rgba(255, 255, 255, 0.05);
            color: #64748b;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .day-box.missed {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .day-reward {
            position: absolute;
            top: -25px;
            font-size: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 2px 6px;
            border-radius: 10px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .day-box:hover .day-reward {
            opacity: 1;
        }
        
        .reward-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }
        
        .reward-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .reward-item i {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .reward-item.coin-reward i {
            color: var(--warning);
        }
        
        .reward-item.streak-reward i {
            color: var(--primary);
        }
        
        .reward-item.bonus-reward i {
            color: var(--success);
        }
        
        .login-reminder {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--warning);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 14px;
        }
        
        .streak-benefits {
            margin-top: 30px;
            padding: 20px;
            background: rgba(99, 102, 241, 0.05);
            border-radius: 12px;
            border-left: 4px solid var(--primary);
        }
        
        .streak-note {
            font-size: 12px;
            color: #94a3b8;
            margin-top: 20px;
            text-align: center;
            font-style: italic;
        }
        
        .claim-button {
            background: linear-gradient(45deg, var(--warning), #f97316);
            color: white;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: 700;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .claim-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(245, 158, 11, 0.3);
        }
        
        .claim-button.claimed {
            background: linear-gradient(45deg, var(--success), #059669);
        }
        
        .claim-button.disabled {
            background: #64748b;
            cursor: not-allowed;
        }
        
        .claim-button.disabled:hover {
            transform: none;
            box-shadow: none;
        }
        
        .streak-warning {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        /* Streak Modal */
        .streak-modal-content {
            max-width: 500px;
            text-align: center;
        }
        
        .streak-celebration {
            font-size: 48px;
            color: var(--warning);
            margin: 20px 0;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* STC Posts Styles */
        .posts-section {
            padding: 100px 0 60px;
        }
        
        .posts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .post-card {
            position: relative;
            overflow: hidden;
        }
        
        .post-date {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .post-image {
            height: 200px;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            border-radius: 10px 10px 0 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
        }
        
        .post-content {
            padding: 20px;
        }
        
        .post-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .post-tag {
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }
        
        /* Ad Before Mining Modal */
        .ad-modal-content {
            max-width: 500px;
            text-align: center;
        }
        
        .ad-countdown {
            font-size: 42px;
            color: var(--warning);
            font-weight: 700;
            margin: 20px 0;
        }
        
        .ad-progress-container {
            background: rgba(255, 255, 255, 0.1);
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .ad-progress-bar {
            height: 100%;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            border-radius: 3px;
            width: 0%;
            transition: width 1s linear;
        }
        
        /* Responsive adjustments for daily login */
        @media (max-width: 768px) {
            .streak-calendar {
                gap: 5px;
            }
            
            .day-box {
                width: 35px;
                height: 35px;
                font-size: 11px;
            }
            
            .streak-count {
                font-size: 36px;
            }
            
            .flame-animation {
                font-size: 32px;
            }
            
            .reward-breakdown {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .day-box {
                width: 30px;
                height: 30px;
                font-size: 10px;
            }
            
            .streak-count {
                font-size: 28px;
            }
        }

        /* NEW: Ad Display Styles */
        .ad-display-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed rgba(255, 255, 255, 0.1);
        }
        
        .ad-display-frame {
            width: 100%;
            height: 180px;
            border: none;
            border-radius: 8px;
            background: white;
        }
        
        .ad-info {
            font-size: 12px;
            color: #94a3b8;
            margin-top: 10px;
        }
        
        .ad-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <!-- Header with Single Line Navigation -->
    <header>
        <div class="container nav-container">
            <a href="#" class="logo" onclick="showPage('home')">
                <i class="fas fa-gem"></i>
                STC-REWARDS
            </a>
            
            <div class="main-nav">
                <ul class="nav-links">
                    <li><a href="#" onclick="showPage('home')" class="active">Home</a></li>
                    <li><a href="#" onclick="showPage('dashboard')" id="dashboardLink">Dashboard</a></li>
                    <li><a href="#" onclick="showPage('mining')">Mining</a></li>
                    <li><a href="#" onclick="showPage('ads')">Watch Ads</a></li>
                    <li><a href="#" onclick="showPage('referral')">Referral</a></li>
                    <li><a href="#" onclick="showPage('withdrawalHistory')">Withdrawal History</a></li>
                    <li><a href="#" onclick="showPage('token')">STC Token</a></li>
                    <li><a href="#" onclick="showPage('posts')">STC Posts</a></li>
                    <li><a href="#" onclick="showPage('dailyLogin')">Daily Login</a></li>
                </ul>
            </div>
            
            <div class="auth-buttons">
                <button class="btn btn-primary" onclick="showAuthModal('login')" id="loginBtn">Login</button>
                <button class="btn btn-secondary" onclick="showAuthModal('signup')" id="signupBtn">Sign Up</button>
                <div class="profile-dropdown" id="userProfile" style="display: none;">
                    <div style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <img src="" alt="Profile" class="user-avatar" id="userAvatar">
                        <span id="userNameDisplay"></span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="profile-menu">
                        <a href="#" onclick="showPage('dashboard')"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                        <a href="#" onclick="showPage('withdrawalHistory')"><i class="fas fa-history"></i> Withdrawal History</a>
                        <a href="#" onclick="showPage('posts')"><i class="fas fa-newspaper"></i> STC Posts</a>
                        <a href="#" onclick="showPage('dailyLogin')"><i class="fas fa-calendar-check"></i> Daily Login</a>
                        <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Home Page -->
    <div id="home" class="page active">
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Earn STC Tokens & Crypto Rewards</h1>
                    <p>Watch ads, mine STC tokens, refer friends and convert your earnings to cryptocurrency. Join thousands earning passive income daily. STC Token is a new project launching its first phase of mining!</p>
                    <button class="btn btn-mining pulse" onclick="startMiningFromHome()">
                        <i class="fas fa-play"></i> Start Mining STC
                    </button>
                    
                    <div class="hero-stats">
                        <div class="stat-box">
                            <div class="stat-value growing-number" id="totalUsers">1,000</div>
                            <div class="stat-label">Active Users</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value price-fluctuation">$5.24<span class="market-indicator market-up">+4.8%</span></div>
                            <div class="stat-label">STC Token Price</div>
                            <div class="price-note">Estimated $5, subject to market</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="totalWithdrawn">$12,075</div>
                            <div class="stat-label">Total Withdrawn</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="activeMiners">950</div>
                            <div class="stat-label">Active Miners</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="features">
            <div class="container">
                <h2 class="section-title">How It Works</h2>
                <div class="features-grid">
                    <div class="card">
                        <div class="feature-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <h3>Create Account</h3>
                        <p>Sign up with Google or email and start earning. Get 50 STC bonus only with referral code during launch phase.</p>
                    </div>
                    <div class="card">
                        <div class="feature-icon">
                            <i class="fas fa-ad"></i>
                        </div>
                        <h3>Watch Ads</h3>
                        <p>Watch short video ads and earn 10-25 coins. 5000 coins = $1. Minimum $5 withdrawal (25000 coins).</p>
                    </div>
                    <div class="card">
                        <div class="feature-icon">
                            <i class="fas fa-hard-hat"></i>
                        </div>
                        <h3>Mine STC Tokens</h3>
                        <p>Mine STC tokens in 6-hour sessions. Earn 12 STC per session. After mining completes, you'll receive your rewards.</p>
                    </div>
                    <div class="card">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Refer Friends</h3>
                        <p>Earn 50 STC tokens for each successful referral during launch. Your friend also gets 50 STC bonus with your code.</p>
                    </div>
                </div>
                
                <!-- Daily Login Feature Card -->
                <div class="card" style="margin-top: 30px; text-align: center;">
                    <div class="feature-icon" style="margin: 0 auto 15px;">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <h3>Daily Login Rewards</h3>
                    <p>Login every day to build your streak! Start with 2 STC + 50 coins on Day 1, increasing daily. After 30 days, earn 60 STC every day!</p>
                    <button class="btn btn-primary" onclick="showPage('dailyLogin')" style="margin-top: 15px;">
                        <i class="fas fa-gift"></i> Start Your Streak
                    </button>
                </div>
                
                <!-- Coin Rate Information -->
                <div class="coin-rate-info">
                    <div class="rate-box">
                        <h4><i class="fas fa-coins"></i> Coin Value</h4>
                        <p>5000 Coins = $1 USD</p>
                    </div>
                    <div class="rate-box">
                        <h4><i class="fas fa-wallet"></i> Minimum Withdrawal</h4>
                        <p>25000 Coins = $5 USD</p>
                    </div>
                    <div class="rate-box">
                        <h4><i class="fas fa-clock"></i> Average Earnings</h4>
                        <p>~5000 coins per day watching ads</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard" class="page">
        <section class="dashboard">
            <div class="container">
                <div class="user-header">
                    <div class="user-info">
                        <h2 id="userName">Welcome to Dashboard</h2>
                        <p id="userEmail"></p>
                    </div>
                    <div>
                        <button class="btn btn-secondary" onclick="showPage('withdrawalHistory')">
                            <i class="fas fa-history"></i> Withdrawal History
                        </button>
                    </div>
                </div>

                <div class="balance-grid">
                    <div class="card balance-card">
                        <div class="balance-label">STC Tokens</div>
                        <div class="balance-amount" id="stcBalance">0</div>
                        <div class="balance-value">≈ $<span id="stcValue">0</span> (<span id="stcPrice">5.24</span> per STC)</div>
                    </div>
                    <div class="card balance-card">
                        <div class="balance-label">Coins Balance</div>
                        <div class="balance-amount" id="coinBalance">0</div>
                        <div class="balance-value">≈ $<span id="coinValue">0</span> (5000 coins = $1)</div>
                        <div class="coin-progress-container">
                            <div class="coin-progress-bar" id="coinProgress"></div>
                        </div>
                        <div style="font-size: 12px; color: #94a3b8; margin-top: 5px;">
                            Progress to $5: <span id="coinProgressText">0%</span>
                        </div>
                    </div>
                    <div class="card balance-card">
                        <div class="balance-label">USDT Balance</div>
                        <div class="balance-amount" id="usdtBalance">0.00</div>
                        <div class="balance-value">Available for withdrawal</div>
                    </div>
                </div>

                <!-- Daily Streak Widget on Dashboard -->
                <div class="card" style="margin-top: 30px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 style="margin: 0;">Daily Login Streak</h3>
                        <a href="#" onclick="showPage('dailyLogin')" style="color: var(--primary); font-size: 14px; text-decoration: none;">
                            <i class="fas fa-external-link-alt"></i> View Details
                        </a>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                        <div style="text-align: center;">
                            <div class="streak-count" id="dashboardStreak">0</div>
                            <div class="streak-label">Day Streak</div>
                        </div>
                        
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: #94a3b8; font-size: 14px;">Today's Reward:</span>
                                <span style="font-weight: 600; color: var(--warning);" id="todayReward">0 STC + 50 coins</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: #94a3b8; font-size: 14px;">Next Reward:</span>
                                <span style="font-weight: 600; color: var(--primary);" id="nextReward">2 STC + 50 coins</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: #94a3b8; font-size: 14px;">Status:</span>
                                <span style="font-weight: 600; color: var(--success);" id="streakStatus">Ready to claim</span>
                            </div>
                        </div>
                    </div>
                    
                    <button class="claim-button" onclick="claimDailyReward()" id="dashboardClaimBtn" style="width: 100%; margin-top: 15px;">
                        <i class="fas fa-gift"></i> Claim Daily Reward
                    </button>
                </div>

                <div style="margin: 30px 0;">
                    <h3 style="margin-bottom: 15px;">Quick Actions</h3>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="showPage('mining')">
                            <i class="fas fa-play"></i> Start Mining
                        </button>
                        <button class="btn btn-success" onclick="showPage('ads')">
                            <i class="fas fa-ad"></i> Watch Ads
                        </button>
                        <button class="btn btn-mining" onclick="showPage('referral')">
                            <i class="fas fa-user-plus"></i> Refer Friends
                        </button>
                        <button class="btn btn-secondary" onclick="showWithdrawModal()">
                            <i class="fas fa-wallet"></i> Withdraw Funds
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Mining Page -->
    <div id="mining" class="page">
        <section class="mining-section">
            <div class="container">
                <h2 class="section-title">STC Token Mining - First Phase</h2>
                <div class="mining-container">
                    <div class="card mining-status">
                        <h3 style="margin-bottom: 15px;">Mining Status: <span id="miningStatusText" style="color: var(--success);">Ready to Start</span></h3>
                        <div class="mining-timer" id="miningTimer">06:00:00</div>
                        <div class="progress-container">
                            <div class="progress-bar" id="miningProgress"></div>
                        </div>
                        <div style="text-align: center;">
                            <p style="margin-bottom: 15px; color: #94a3b8;">Each mining session: 6 hours → 12 STC tokens</p>
                            <p style="margin-bottom: 15px; color: var(--warning); font-size: 14px;"><i class="fas fa-info-circle"></i> Watch an ad to start mining and earn bonus!</p>
                            <button class="btn btn-mining" id="miningBtn" onclick="showAdBeforeMining()">Watch Ad to Start Mining</button>
                        </div>
                    </div>
                    <div class="card">
                        <h3 style="margin-bottom: 15px;">Mining Details</h3>
                        <div style="margin-bottom: 15px;">
                            <h4>STC Token Price: <span class="price-fluctuation">$5.24</span> <span class="market-indicator market-up">Live</span></h4>
                            <p style="color: #94a3b8; margin-top: 5px; font-size: 13px;">Estimated price: $5, subject to market conditions</p>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <h4>Mining Rewards</h4>
                            <p style="color: #94a3b8; margin-top: 5px; font-size: 13px;">12 STC per 6-hour session</p>
                            <p style="color: var(--success); font-size: 13px; margin-top: 3px;">≈ $62.88 per session at current price</p>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <h4>Referral Mining Bonus</h4>
                            <p style="color: #94a3b8; margin-top: 5px; font-size: 13px;">Earn 10% of your referrals' mining rewards</p>
                            <p style="color: var(--primary); font-size: 13px; margin-top: 3px;">Passive income from your network</p>
                        </div>
                        <div>
                            <h4>Total Mined</h4>
                            <p style="font-size: 22px; color: var(--success); margin-top: 5px;" id="totalMined">0 STC</p>
                            <p style="color: #94a3b8; font-size: 13px; margin-top: 3px;">≈ $<span id="totalMinedValue">0</span> at current price</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Ads Page -->
    <div id="ads" class="page">
        <section class="ads-section">
            <div class="container">
                <h2 class="section-title">Watch Ads & Earn Coins</h2>
                <p style="text-align: center; margin-bottom: 30px; color: #94a3b8;">Watch ads and earn 10-25 coins. 5000 coins = $1 USD.</p>
                
                <!-- Harder to Earn Notice -->
                <div class="hard-earn-notice">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Real Money Value:</strong> Earning coins is harder as they represent real monetary value. 
                    5000 coins = $1 USD. This ensures sustainable rewards for all users.
                </div>
                
                <div class="ads-grid">
                    <div class="card ad-card">
                        <i class="fas fa-gamepad fa-2x" style="color: var(--primary);"></i>
                        <h4 style="margin: 12px 0; font-size: 16px;">Game Ad</h4>
                        <div class="ad-reward">10-15 coins</div>
                        <button class="btn btn-primary watch-ad-btn" data-min="10" data-max="15">
                            <i class="fas fa-play"></i> Watch (45s)
                        </button>
                    </div>
                    <div class="card ad-card">
                        <i class="fas fa-shopping-bag fa-2x" style="color: var(--accent);"></i>
                        <h4 style="margin: 12px 0; font-size: 16px;">Shopping Ad</h4>
                        <div class="ad-reward">12-18 coins</div>
                        <button class="btn btn-primary watch-ad-btn" data-min="12" data-max="18">
                            <i class="fas fa-play"></i> Watch (60s)
                        </button>
                    </div>
                    <div class="card ad-card">
                        <i class="fas fa-film fa-2x" style="color: var(--warning);"></i>
                        <h4 style="margin: 12px 0; font-size: 16px;">Video Ad</h4>
                        <div class="ad-reward">15-25 coins</div>
                        <button class="btn btn-primary watch-ad-btn" data-min="15" data-max="25">
                            <i class="fas fa-play"></i> Watch (90s)
                        </button>
                    </div>
                    <div class="card ad-card">
                        <i class="fas fa-mobile-alt fa-2x" style="color: var(--success);"></i>
                        <h4 style="margin: 12px 0; font-size: 16px;">App Ad</h4>
                        <div class="ad-reward">10-20 coins</div>
                        <button class="btn btn-primary watch-ad-btn" data-min="10" data-max="20">
                            <i class="fas fa-play"></i> Watch (60s)
                        </button>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px; text-align: center;">
                    <h3 style="margin-bottom: 12px; font-size: 18px;">Your Earnings</h3>
                    <p style="font-size: 22px; color: var(--warning); margin-bottom: 12px;" id="totalCoins">0 coins</p>
                    <p style="color: #94a3b8; margin-bottom: 15px; font-size: 13px;">5000 coins = $1 USD | Minimum withdrawal: $5 (25000 coins)</p>
                    
                    <!-- Coin Progress Bar -->
                    <div class="coin-progress-container">
                        <div class="coin-progress-bar" id="adsCoinProgress"></div>
                    </div>
                    <div style="font-size: 12px; color: #94a3b8; margin: 5px 0 15px;">
                        Progress to minimum withdrawal: <span id="adsProgressText">0%</span>
                    </div>
                    
                    <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                        <button class="btn btn-success" onclick="convertCoins()">
                            <i class="fas fa-exchange-alt"></i> Convert to USDT
                        </button>
                        <button class="btn btn-primary" onclick="showWithdrawModal()">
                            <i class="fas fa-wallet"></i> Withdraw Funds
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Referral Page -->
    <div id="referral" class="page">
        <section class="referral-section">
            <div class="container">
                <h2 class="section-title">Referral Program - Launch Bonus!</h2>
                <div class="card" style="text-align: center; margin-bottom: 30px;">
                    <h3 style="margin-bottom: 12px;">Earn 50 STC Per Referral + 10% Mining Bonus!</h3>
                    <p style="color: #94a3b8; margin-bottom: 15px; font-size: 14px;">Share your referral code and earn 50 STC tokens for each friend who signs up. Plus, earn 10% of their mining rewards forever!</p>
                    <p style="color: var(--warning); font-size: 13px; margin-bottom: 10px;"><i class="fas fa-gift"></i> Special launch bonus: 50 STC (normally 20 STC)</p>
                    <p style="color: var(--primary); font-size: 13px; margin-bottom: 10px;"><i class="fas fa-hard-hat"></i> 10% mining bonus from all referrals</p>
                </div>

                <div class="referral-code-box">
                    <h4 style="margin-bottom: 12px;">Your Referral Code</h4>
                    <div class="referral-code" id="referralCodeDisplay">STC-<span id="refCode">X8Y9Z7</span></div>
                    <p style="margin: 15px 0; font-size: 14px;">Share this code with your friends during launch phase</p>
                    
                    <!-- Referral Link -->
                    <div style="margin: 20px 0; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: 8px;">
                        <p style="font-size: 13px; color: #94a3b8; margin-bottom: 8px;">Your Referral Link:</p>
                        <input type="text" id="referralLink" readonly style="width: 100%; padding: 10px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 6px; color: white; font-size: 14px; text-align: center;">
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                        <button class="btn btn-mining" onclick="copyReferralCode()">
                            <i class="fas fa-copy"></i> Copy Code
                        </button>
                        <button class="btn btn-primary" onclick="copyReferralLink()">
                            <i class="fas fa-link"></i> Copy Link
                        </button>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px;">
                    <h3 style="margin-bottom: 15px;">Referral Statistics</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px;">
                        <div>
                            <h4 style="font-size: 14px;">Total Referrals</h4>
                            <p style="font-size: 28px; color: var(--primary);" id="refCount">0</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px;">STC Earned</h4>
                            <p style="font-size: 28px; color: var(--success);" id="refEarnings">0</p>
                            <p style="color: #94a3b8; font-size: 12px;">≈ $<span id="refEarningsValue">0</span> at $5.24/STC</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px;">Mining Bonus</h4>
                            <p style="font-size: 28px; color: var(--warning);" id="miningBonus">0</p>
                            <p style="color: #94a3b8; font-size: 12px;">10% from referrals</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Withdrawal History Page -->
    <div id="withdrawalHistory" class="page">
        <section class="withdrawal-history-page">
            <div class="container">
                <h2 class="section-title">Withdrawal History</h2>
                
                <div class="history-filter">
                    <button class="filter-btn active" onclick="filterWithdrawals('all')">All</button>
                    <button class="filter-btn" onclick="filterWithdrawals('pending')">Pending</button>
                    <button class="filter-btn" onclick="filterWithdrawals('processing')">Processing</button>
                    <button class="filter-btn" onclick="filterWithdrawals('completed')">Completed</button>
                    <button class="filter-btn" onclick="filterWithdrawals('failed')">Failed</button>
                </div>

                <div class="card">
                    <div id="withdrawalHistoryContent">
                        <!-- History will be loaded here -->
                        <div class="empty-state" id="emptyHistory">
                            <i class="fas fa-history"></i>
                            <h3>No Withdrawal History</h3>
                            <p>You haven't made any withdrawals yet.</p>
                            <button class="btn btn-primary" onclick="showWithdrawModal()" style="margin-top: 15px;">
                                <i class="fas fa-wallet"></i> Make Your First Withdrawal
                            </button>
                        </div>
                        
                        <table class="history-table" id="withdrawalHistoryTable" style="display: none;">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Amount</th>
                                    <th>Method</th>
                                    <th>Wallet/Account</th>
                                    <th>Status</th>
                                    <th>Transaction ID</th>
                                </tr>
                            </thead>
                            <tbody id="withdrawalHistoryBody">
                                <!-- Rows will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Token Page -->
    <div id="token" class="page">
        <section class="mining-section">
            <div class="container">
                <h2 class="section-title">STC Token Information - New Project</h2>
                
                <div class="token-tabs">
                    <button class="token-tab active" onclick="showTokenTab('overview')">Overview</button>
                    <button class="token-tab" onclick="showTokenTab('whitepaper')">White Paper</button>
                    <button class="token-tab" onclick="showTokenTab('roadmap')">Road Map</button>
                    <button class="token-tab" onclick="showTokenTab('tokenomics')">Tokenomics</button>
                </div>
                
                <!-- Overview Tab -->
                <div id="overviewTab" class="token-content active">
                    <div class="card" style="margin-bottom: 25px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px;">
                            <div>
                                <h3 style="margin-bottom: 12px;">STC Token Price</h3>
                                <p style="font-size: 42px; color: var(--success); font-weight: 700;" class="price-fluctuation">$5.24</p>
                                <p style="color: #94a3b8; font-size: 13px;">Estimated $5, subject to market conditions</p>
                                <p style="color: var(--warning); font-size: 12px; margin-top: 5px;"><i class="fas fa-chart-line"></i> Price fluctuates based on market</p>
                            </div>
                            <div>
                                <h3 style="margin-bottom: 12px;">Market Cap</h3>
                                <p style="font-size: 28px; color: var(--primary); font-weight: 700;">$62.45M</p>
                                <p style="color: #94a3b8; font-size: 13px;">Total circulating supply</p>
                            </div>
                            <div>
                                <h3 style="margin-bottom: 12px;">Total Supply</h3>
                                <p style="font-size: 28px; color: var(--accent); font-weight: 700;">100M STC</p>
                                <p style="color: #94a3b8; font-size: 13px;">Maximum token supply</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 style="margin-bottom: 15px;">About STC Token - New Project Launch</h3>
                        <div class="token-details">
                            <p>STC (Stable Token Coin) is a <strong>new utility token</strong> launched in 2026, designed specifically for the STC-REWARDS ecosystem. The token is currently in its <strong>first phase of mining</strong> where users can earn STC through mining activities.</p>
                            
                            <p style="margin: 15px 0; padding: 12px; background: rgba(99, 102, 241, 0.1); border-radius: 8px; border-left: 3px solid var(--warning);">
                                <strong>Current Status:</strong> First Phase Mining Active<br>
                                <strong>Estimated Price:</strong> $5 (fluctuates based on market conditions)<br>
                                <strong>Mining Rewards:</strong> 12 STC per 6-hour session
                            </p>
                            
                            <h3>Key Features:</h3>
                            <ul class="attractive-ul primary">
                                <li><strong>New Project:</strong> Launched in 2026, currently in first mining phase</li>
                                <li><strong>Market Based:</strong> Price estimated at $5 but fluctuates up and down based on market conditions</li>
                                <li><strong>Mining First:</strong> First phase focuses on mining distribution</li>
                                <li><strong>Utility:</strong> Used for platform rewards, mining, and referral bonuses</li>
                                <li><strong>Earnable:</strong> Users can earn STC through various activities on the platform</li>
                                <li><strong>Convertible:</strong> STC can be converted to USDT at market rates</li>
                                <li><strong>Limited Supply:</strong> Total supply capped at 100 million tokens</li>
                            </ul>
                            
                            <h3>Launch Phase Features:</h3>
                            <ul class="attractive-ul warning">
                                <li>Special mining rewards during first phase</li>
                                <li>Increased referral bonuses (50 STC per referral)</li>
                                <li>Early adopter benefits</li>
                                <li>Progressive price discovery</li>
                                <li>Multiple withdrawal options (Crypto & Bank)</li>
                                <li>Real monetary value for coins (5000 coins = $1)</li>
                            </ul>
                            
                            <h3>Withdrawal Options:</h3>
                            <ul class="attractive-ul success">
                                <li><strong>Cryptocurrency:</strong> USDT, BTC, ETH, USDC</li>
                                <li><strong>Bank Transfer:</strong> Local bank withdrawals available</li>
                                <li><strong>Minimum Withdrawal:</strong> $5 (25000 coins)</li>
                                <li><strong>Processing Time:</strong> 24-72 hours for bank transfers</li>
                                <li><strong>Crypto Withdrawals:</strong> Usually within 24 hours</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- White Paper Tab -->
                <div id="whitepaperTab" class="token-content">
                    <div class="card">
                        <div class="token-details">
                            <h2 style="margin-bottom: 20px;">STC Token White Paper - 2026 Launch</h2>
                            
                            <h3>1. Executive Summary</h3>
                            <p>STC Token is a <strong>new utility token launched in 2026</strong>, designed to power the STC-REWARDS ecosystem. This white paper outlines the technical implementation, economic model, and future development roadmap of the STC token, starting with its first mining phase.</p>
                            
                            <h3>2. Introduction - The 2026 Launch</h3>
                            <p>STC-REWARDS platform launches in 2026 with a focus on mining distribution. The STC token serves as the primary reward mechanism within this ecosystem, with an <strong>estimated starting price of $5 per token</strong>, subject to market fluctuations.</p>
                            
                            <h3>3. Technical Architecture</h3>
                            <ul class="attractive-ul info">
                                <li><strong>Launch Year:</strong> 2026</li>
                                <li><strong>Token Standard:</strong> Utility Token</li>
                                <li><strong>Initial Price:</strong> Estimated $5 (market dependent)</li>
                                <li><strong>Phase 1:</strong> Mining distribution</li>
                                <li><strong>Storage:</strong> Secure cloud storage with Firebase</li>
                                <li><strong>Transactions:</strong> Real-time balance updates</li>
                                <li><strong>Withdrawal Options:</strong> Multiple cryptocurrency and bank options</li>
                            </ul>
                            
                            <h3>4. Economic Model - Real Monetary Value</h3>
                            <ul class="attractive-ul warning">
                                <li><strong>Coin Value:</strong> 5000 coins = $1 USD (Real monetary value)</li>
                                <li><strong>Minimum Withdrawal:</strong> 25000 coins = $5 USD</li>
                                <li><strong>STC Price:</strong> Estimated $5, fluctuates with market</li>
                                <li><strong>Supply Control:</strong> Total Supply: 100,000,000 STC</li>
                                <li><strong>Circulating Supply:</strong> Controlled through phased mining</li>
                                <li><strong>Value Discovery:</strong> Progressive price discovery through market participation</li>
                            </ul>
                            
                            <h3>5. Mining Phase 1 (2026-2027)</h3>
                            <p>The first phase focuses on mining distribution to build the initial user base and establish token utility.</p>
                            
                            <h3>6. Security Features</h3>
                            <ul class="attractive-ul success">
                                <li>Google Firebase Authentication</li>
                                <li>Secure data encryption</li>
                                <li>Withdrawal verification system</li>
                                <li>Anti-fraud monitoring</li>
                                <li>Multi-factor authentication support</li>
                                <li>Secure withdrawal processing</li>
                            </ul>
                            
                            <div style="text-align: center; margin-top: 30px;">
                                <button class="btn btn-primary" onclick="downloadWhitepaper()">
                                    <i class="fas fa-download"></i> Download White Paper (PDF)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Road Map Tab -->
                <div id="roadmapTab" class="token-content">
                    <div class="card">
                        <div class="token-details">
                            <h2 style="margin-bottom: 20px;">STC Token Road Map - 2026 Onwards</h2>
                            
                            <div class="roadmap-timeline">
                                <!-- Phase 1 -->
                                <div class="roadmap-phase current">
                                    <h3 style="color: var(--primary);">Phase 1: Platform Launch & Mining (Q4 2026)</h3>
                                    <ul class="attractive-ul primary">
                                        <li>✓ Platform development and testing</li>
                                        <li>✓ STC token implementation</li>
                                        <li>✓ First phase mining functionality</li>
                                        <li>✓ Ad watching rewards system</li>
                                        <li>✓ Referral program setup with launch bonuses</li>
                                        <li>✓ Initial price discovery ($5 estimated)</li>
                                        <li>✓ Multiple withdrawal options integration</li>
                                        <li>✓ Real monetary value implementation (5000 coins = $1)</li>
                                    </ul>
                                </div>
                                
                                <!-- Phase 2 -->
                                <div class="roadmap-phase future">
                                    <h3>Phase 2: Mobile App & Features (Q1 2027)</h3>
                                    <ul class="attractive-ul">
                                        <li>iOS and Android mobile app release</li>
                                        <li>Enhanced mining algorithms</li>
                                        <li>Additional ad formats and partners</li>
                                        <li>User profile customization</li>
                                        <li>Advanced analytics dashboard</li>
                                        <li>Price stabilization mechanisms</li>
                                        <li>More withdrawal methods integration</li>
                                        <li>International bank transfer support</li>
                                    </ul>
                                </div>
                                
                                <!-- Phase 3 -->
                                <div class="roadmap-phase future">
                                    <h3>Phase 3: Exchange Integration (Q2 2027)</h3>
                                    <ul class="attractive-ul">
                                        <li>STC token exchange listing</li>
                                        <li>Cross-platform transfer capabilities</li>
                                        <li>Wallet integration</li>
                                        <li>Multi-chain support</li>
                                        <li>Partnership announcements</li>
                                        <li>Market expansion initiatives</li>
                                        <li>Enhanced security features</li>
                                        <li>Global payment gateway integration</li>
                                    </ul>
                                </div>
                                
                                <!-- Phase 4 -->
                                <div class="roadmap-phase future">
                                    <h3>Phase 4: Ecosystem Expansion (Q3 2027)</h3>
                                    <ul class="attractive-ul">
                                        <li>STC wallet application</li>
                                        <li>Merchant adoption program</li>
                                        <li>Staking and governance features</li>
                                        <li>Advanced DeFi integrations</li>
                                        <li>Community governance implementation</li>
                                        <li>Global market penetration</li>
                                        <li>Additional earning methods</li>
                                        <li>Premium subscription features</li>
                                    </ul>
                                </div>
                                
                                <!-- Future -->
                                <div class="roadmap-phase future">
                                    <h3 style="color: var(--accent);">Future Vision (2028+)</h3>
                                    <ul class="attractive-ul info">
                                        <li>Global expansion to new markets</li>
                                        <li>NFT marketplace integration</li>
                                        <li>Advanced AI-powered earning opportunities</li>
                                        <li>Complete decentralized platform transition</li>
                                        <li>Industry partnerships and collaborations</li>
                                        <li>Market leadership in utility tokens</li>
                                        <li>Real-world asset tokenization</li>
                                        <li>Cross-border payment solutions</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tokenomics Tab -->
                <div id="tokenomicsTab" class="token-content">
                    <div class="card">
                        <div class="token-details">
                            <h2 style="margin-bottom: 20px;">STC Token Tokenomics - 2026 Distribution</h2>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 30px;">
                                <div>
                                    <h3>Distribution Breakdown (2026 Launch)</h3>
                                    <ul class="attractive-ul">
                                        <li><strong>Phase 1 Mining Rewards:</strong> 40,000,000 STC (40%)</li>
                                        <li><strong>Platform Reserve:</strong> 30,000,000 STC (30%)</li>
                                        <li><strong>Team & Development:</strong> 15,000,000 STC (15%)</li>
                                        <li><strong>Marketing & Partnerships:</strong> 10,000,000 STC (10%)</li>
                                        <li><strong>Community & Airdrops:</strong> 5,000,000 STC (5%)</li>
                                    </ul>
                                </div>
                                <div>
                                    <h3>Release Schedule (2026-2028)</h3>
                                    <ul class="attractive-ul warning">
                                        <li><strong>Phase 1 Mining (2026-2027):</strong> 40M STC distributed</li>
                                        <li><strong>Platform Reserve:</strong> Locked until Q2 2027</li>
                                        <li><strong>Team Allocation:</strong> 3-year vesting starting 2027</li>
                                        <li><strong>Marketing Funds:</strong> Phased release 2026-2028</li>
                                        <li><strong>Community Funds:</strong> Immediate availability for programs</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div style="background: rgba(99, 102, 241, 0.1); padding: 20px; border-radius: 10px; margin-top: 20px;">
                                <h3 style="margin-bottom: 10px;">Real Monetary Value System</h3>
                                <ul class="attractive-ul success">
                                    <li><strong>Coin Value:</strong> 5000 coins = $1 USD (Real money)</li>
                                    <li><strong>Minimum Withdrawal:</strong> $5 USD (25000 coins)</li>
                                    <li><strong>STC Token Price:</strong> Estimated $5 (fluctuates with market)</li>
                                    <li><strong>Earning Difficulty:</strong> Harder to earn as it's real monetary value</li>
                                    <li><strong>Sustainability:</strong> Ensures long-term platform sustainability</li>
                                    <li><strong>Withdrawal Options:</strong> Multiple methods available</li>
                                    <li><strong>Processing Fees:</strong> Minimal fees for sustainability</li>
                                </ul>
                            </div>
                            
                            <div style="background: rgba(245, 158, 11, 0.1); padding: 20px; border-radius: 10px; margin-top: 20px;">
                                <h3 style="margin-bottom: 10px;">Withdrawal Methods & Fees</h3>
                                <ul class="attractive-ul warning">
                                    <li><strong>USDT (TRC20/ERC20):</strong> 1% fee, processed within 24 hours</li>
                                    <li><strong>Bitcoin (BTC):</strong> 2% fee, processed within 24 hours</li>
                                    <li><strong>Ethereum (ETH):</strong> 2% fee, processed within 24 hours</li>
                                    <li><strong>USDC:</strong> 1% fee, processed within 24 hours</li>
                                    <li><strong>Bank Transfer:</strong> 3% fee, processed in 24-72 hours</li>
                                    <li><strong>Minimum Withdrawal:</strong> $5 USD for all methods</li>
                                    <li><strong>Maximum Daily:</strong> $1000 USD per user</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- STC Posts Page -->
    <div id="posts" class="page">
        <section class="posts-section">
            <div class="container">
                <h2 class="section-title">STC News & Updates</h2>
                
                <div class="card" style="margin-bottom: 25px; text-align: center;">
                    <h3 style="margin-bottom: 12px;">Latest STC Token Updates</h3>
                    <p style="color: #94a3b8;">Stay updated with the latest news about STC Token, mining updates, and platform announcements.</p>
                </div>
                
                <div class="posts-grid">
                    <div class="card post-card">
                        <div class="post-date">2026-01-15</div>
                        <div class="post-image">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <div class="post-content">
                            <h3>STC Token Launch Announcement</h3>
                            <p>We are excited to announce the official launch of STC Token! The first phase of mining is now live. Users can start earning STC tokens through mining, watching ads, and referrals.</p>
                            <div class="post-tags">
                                <span class="post-tag">Launch</span>
                                <span class="post-tag">Mining</span>
                                <span class="post-tag">News</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card post-card">
                        <div class="post-date">2026-01-10</div>
                        <div class="post-image">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="post-content">
                            <h3>Price Update & Market Performance</h3>
                            <p>STC Token is performing well in the market with stable price discovery. Current estimated price is $5 with healthy fluctuations based on market demand and mining activity.</p>
                            <div class="post-tags">
                                <span class="post-tag">Price</span>
                                <span class="post-tag">Market</span>
                                <span class="post-tag">Update</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card post-card">
                        <div class="post-date">2026-01-05</div>
                        <div class="post-image">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="post-content">
                            <h3>Enhanced Referral Program</h3>
                            <p>We've upgraded our referral program! Now earn 50 STC per referral PLUS 10% of their mining rewards forever. Build your passive income network today.</p>
                            <div class="post-tags">
                                <span class="post-tag">Referral</span>
                                <span class="post-tag">Bonus</span>
                                <span class="post-tag">Earnings</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card post-card">
                        <div class="post-date">2026-01-01</div>
                        <div class="post-image">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="post-content">
                            <h3>Daily Login Rewards System</h3>
                            <p>Introducing our new Daily Login Rewards system! Login every day to build your streak and earn increasing STC rewards. After 30 days, earn 60 STC daily!</p>
                            <div class="post-tags">
                                <span class="post-tag">Daily</span>
                                <span class="post-tag">Rewards</span>
                                <span class="post-tag">Streak</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card post-card">
                        <div class="post-date">2025-12-28</div>
                        <div class="post-image">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="post-content">
                            <h3>Multiple Withdrawal Options Added</h3>
                            <p>We now support multiple withdrawal methods including USDT, BTC, ETH, USDC, and bank transfers. Choose your preferred method and withdraw your earnings easily.</p>
                            <div class="post-tags">
                                <span class="post-tag">Withdrawal</span>
                                <span class="post-tag">Crypto</span>
                                <span class="post-tag">Bank</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card post-card">
                        <div class="post-date">2025-12-25</div>
                        <div class="post-image">
                            <i class="fas fa-hard-hat"></i>
                        </div>
                        <div class="post-content">
                            <h3>Mining Phase 1 Success</h3>
                            <p>First phase of STC mining is exceeding expectations! Thousands of users are actively mining STC tokens. Early adopters are earning substantial rewards.</p>
                            <div class="post-tags">
                                <span class="post-tag">Mining</span>
                                <span class="post-tag">Success</span>
                                <span class="post-tag">Phase 1</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Daily Login Page -->
    <div id="dailyLogin" class="page">
        <section class="daily-login-section">
            <div class="container">
                <h2 class="section-title">Daily Login Rewards System</h2>
                
                <div class="card daily-login-card">
                    <div class="streak-display">
                        <div class="flame-animation">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="streak-count" id="streakCount">0</div>
                        <div class="streak-label">Consecutive Days</div>
                        <div style="color: #94a3b8; max-width: 400px; margin: 10px 0;">
                            Login daily to build your streak! Each day your STC reward increases by 2. 
                            After 30 days, you'll earn 60 STC every day until you break the streak.
                        </div>
                    </div>
                    
                    <!-- Reward Breakdown -->
                    <div class="reward-breakdown">
                        <div class="reward-item coin-reward">
                            <i class="fas fa-coins"></i>
                            <h4>Daily Coin Reward</h4>
                            <p>50 Coins Every Day</p>
                            <p style="font-size: 12px; color: #94a3b8;">(5000 coins = $1)</p>
                        </div>
                        <div class="reward-item streak-reward">
                            <i class="fas fa-chart-line"></i>
                            <h4>STC Streak Reward</h4>
                            <p id="currentSTCReward">2 STC Today</p>
                            <p style="font-size: 12px; color: #94a3b8;" id="streakFormula">Day 1: 2 STC</p>
                        </div>
                        <div class="reward-item bonus-reward">
                            <i class="fas fa-award"></i>
                            <h4>30-Day Bonus</h4>
                            <p>60 STC Daily</p>
                            <p style="font-size: 12px; color: #94a3b8;">After 30 days streak</p>
                        </div>
                    </div>
                    
                    <!-- Streak Calendar -->
                    <h4 style="margin: 30px 0 15px; color: var(--light);">30-Day Streak Calendar</h4>
                    <div class="streak-calendar" id="streakCalendar">
                        <!-- Calendar will be generated by JavaScript -->
                    </div>
                    
                    <!-- Claim Button -->
                    <button class="claim-button" onclick="claimDailyReward()" id="dailyClaimBtn">
                        <i class="fas fa-gift"></i> Claim Today's Reward
                    </button>
                    
                    <!-- Login Reminder -->
                    <div class="login-reminder" id="loginReminder">
                        <i class="fas fa-bell"></i>
                        <span>You must login within 24 hours to maintain your streak!</span>
                    </div>
                    
                    <!-- Streak Benefits -->
                    <div class="streak-benefits">
                        <h4 style="margin-bottom: 10px; color: var(--primary);">Streak Benefits</h4>
                        <ul class="attractive-ul success" style="text-align: left;">
                            <li><strong>Every Day:</strong> Get 50 coins (worth $0.01)</li>
                            <li><strong>STC Reward:</strong> Starts at 2 STC, increases by 2 each day</li>
                            <li><strong>Day 30+:</strong> Earn 60 STC daily (worth ≈ $314 at $5.24/STC)</li>
                            <li><strong>Break Streak:</strong> If you miss a day, reset to Day 1</li>
                            <li><strong>24-Hour Window:</strong> Login within 24 hours to maintain streak</li>
                        </ul>
                    </div>
                    
                    <div class="streak-note">
                        <i class="fas fa-info-circle"></i> 
                        Daily rewards reset at 12:00 AM UTC. Your streak is saved automatically.
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('loginModal')">&times;</button>
            <h2 class="form-title">Login to STC-REWARDS</h2>
            
            <button class="btn btn-google" onclick="googleAuth()" id="googleLoginBtn">
                <i class="fab fa-google"></i> Continue with Google
            </button>
            
            <div class="divider">
                <span>or continue with email</span>
            </div>
            
            <form id="loginForm" onsubmit="handleEmailLogin(event)">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password (9 characters)</label>
                    <input type="password" class="form-input" id="loginPassword" minlength="9" maxlength="9" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;" id="loginSubmitBtn">
                    Login
                </button>
            </form>
            
            <p style="text-align: center; margin-top: 15px; color: #94a3b8; font-size: 13px;">
                Don't have an account? <a href="#" onclick="switchToSignup()" style="color: var(--primary);">Sign up</a>
            </p>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('signupModal')">&times;</button>
            <h2 class="form-title">Create Account - Join STC 2026 Launch</h2>
            
            <button class="btn btn-google" onclick="googleAuth()" id="googleSignupBtn">
                <i class="fab fa-google"></i> Sign up with Google
            </button>
            
            <div class="divider">
                <span>or sign up with email</span>
            </div>
            
            <form id="signupForm" onsubmit="handleEmailSignup(event)">
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" id="signupName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Date of Birth</label>
                    <input type="date" class="form-input" id="signupDob" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="signupEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password (9 characters)</label>
                    <input type="password" class="form-input" id="signupPassword" minlength="9" maxlength="9" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Referral Code (Optional)</label>
                    <input type="text" class="form-input" id="signupReferral" placeholder="Enter code to get 50 STC launch bonus">
                    <p style="font-size: 11px; color: #94a3b8; margin-top: 5px;">50 STC bonus during launch phase (normally 20 STC)</p>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;" id="signupSubmitBtn">
                    Join STC 2026 Launch
                </button>
            </form>
            
            <p style="text-align: center; margin-top: 15px; color: #94a3b8; font-size: 13px;">
                Already have an account? <a href="#" onclick="switchToLogin()" style="color: var(--primary);">Login</a>
            </p>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div id="withdrawModal" class="modal">
        <div class="modal-content" style="max-width: 550px;">
            <button class="close-modal" onclick="closeModal('withdrawModal')">&times;</button>
            <h2 class="form-title">Withdraw Funds</h2>
            
            <div class="form-group">
                <label class="form-label">Amount to Withdraw (USD)</label>
                <input type="number" class="form-input" id="withdrawAmount" min="5" step="0.1" value="5">
                <p style="font-size: 12px; color: #94a3b8; margin-top: 5px;">Minimum: $5 USD (25000 coins)</p>
                <p style="font-size: 11px; color: var(--warning); margin-top: 3px;">Available: $<span id="availableBalance">0</span> USD</p>
            </div>
            
            <div class="form-group">
                <label class="form-label">Select Withdrawal Method</label>
                <div class="withdrawal-options-grid" id="withdrawalOptions">
                    <div class="withdrawal-option selected" data-method="usdt" data-fee="1" data-network="TRC20">
                        <div class="crypto-icon usdt-bg">
                            <i class="fab fa-usd"></i>
                        </div>
                        <div>USDT</div>
                        <div class="withdrawal-fee">1% fee</div>
                        <div class="withdrawal-minimum">Min: $5</div>
                    </div>
                    <div class="withdrawal-option" data-method="btc" data-fee="2" data-network="BTC">
                        <div class="crypto-icon btc-bg">
                            <i class="fab fa-btc"></i>
                        </div>
                        <div>Bitcoin</div>
                        <div class="withdrawal-fee">2% fee</div>
                        <div class="withdrawal-minimum">Min: $5</div>
                    </div>
                    <div class="withdrawal-option" data-method="eth" data-fee="2" data-network="ERC20">
                        <div class="crypto-icon eth-bg">
                            <i class="fab fa-ethereum"></i>
                        </div>
                        <div>Ethereum</div>
                        <div class="withdrawal-fee">2% fee</div>
                        <div class="withdrawal-minimum">Min: $5</div>
                    </div>
                    <div class="withdrawal-option" data-method="usdc" data-fee="1" data-network="ERC20">
                        <div class="crypto-icon usdc-bg">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div>USDC</div>
                        <div class="withdrawal-fee">1% fee</div>
                        <div class="withdrawal-minimum">Min: $5</div>
                    </div>
                    <div class="withdrawal-option" data-method="bank" data-fee="3" data-network="Bank">
                        <div class="crypto-icon bank-bg">
                            <i class="fas fa-university"></i>
                        </div>
                        <div>Bank Transfer</div>
                        <div class="withdrawal-fee">3% fee</div>
                        <div class="withdrawal-minimum">Min: $5</div>
                    </div>
                </div>
            </div>
            
            <!-- Crypto Wallet Form -->
            <div id="cryptoForm">
                <div class="form-group">
                    <label class="form-label" id="walletLabel">USDT Wallet Address (TRC20)</label>
                    <input type="text" class="form-input" id="walletAddress" placeholder="Enter your wallet address">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Network</label>
                    <select class="form-input" id="withdrawNetwork">
                        <option value="TRC20">TRC20 (Recommended)</option>
                        <option value="ERC20">ERC20</option>
                        <option value="BEP20">BEP20</option>
                    </select>
                </div>
            </div>
            
            <!-- Bank Transfer Form -->
            <div id="bankForm" class="bank-transfer-form">
                <div class="method-details">
                    <p style="color: var(--warning); font-size: 13px; margin-bottom: 10px;">
                        <i class="fas fa-info-circle"></i> Bank transfers take 24-72 hours to process
                    </p>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Bank Name</label>
                    <input type="text" class="form-input" id="bankName" placeholder="Enter your bank name">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Account Holder Name</label>
                    <input type="text" class="form-input" id="accountHolder" placeholder="Enter account holder name">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Account Number</label>
                    <input type="text" class="form-input" id="accountNumber" placeholder="Enter account number">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Routing/SWIFT Code</label>
                    <input type="text" class="form-input" id="routingCode" placeholder="Enter routing or SWIFT code">
                </div>
            </div>
            
            <div class="form-group">
                <div style="background: rgba(99, 102, 241, 0.1); padding: 12px; border-radius: 8px; margin-top: 10px;">
                    <div style="display: flex; justify-content: space-between; font-size: 13px;">
                        <span>Withdrawal Amount:</span>
                        <span>$<span id="displayAmount">5.00</span></span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 13px; margin-top: 5px;">
                        <span>Processing Fee (<span id="feePercent">1</span>%):</span>
                        <span>-$<span id="feeAmount">0.05</span></span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 14px; margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(255, 255, 255, 0.1); font-weight: 600;">
                        <span>You Will Receive:</span>
                        <span>$<span id="netAmount">4.95</span></span>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-success" onclick="processWithdrawal()" style="width: 100%;" id="withdrawSubmitBtn">
                <i class="fas fa-check"></i> Confirm Withdrawal
            </button>
        </div>
    </div>

    <!-- Ad Before Mining Modal -->
    <div id="adMiningModal" class="modal">
        <div class="modal-content ad-modal-content">
            <h2 class="form-title">Watch Ad to Start Mining</h2>
            <p style="text-align: center; color: #94a3b8; margin-bottom: 20px;">Watch a short ad to start mining STC tokens and earn bonus coins!</p>
            
            <div style="padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 10px; margin: 20px 0;">
                <div style="font-size: 48px; color: var(--primary); text-align: center; margin-bottom: 10px;">
                    <i class="fas fa-ad"></i>
                </div>
                <h3 style="text-align: center; margin-bottom: 10px;">STC Mining Ad</h3>
                <p style="text-align: center; color: #94a3b8; font-size: 14px;">Duration: 30 seconds</p>
            </div>
            
            <div class="ad-countdown" id="adCountdown">30</div>
            <div class="ad-progress-container">
                <div class="ad-progress-bar" id="adProgressBar"></div>
            </div>
            
            <p style="text-align: center; color: var(--warning); margin: 15px 0; font-size: 14px;">
                <i class="fas fa-gift"></i> Bonus: Earn 50 coins after watching ad!
            </p>
            
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="btn btn-secondary" onclick="closeModal('adMiningModal')" id="cancelAdBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn btn-mining" onclick="startMiningAfterAd()" id="startMiningBtn" disabled>
                    <i class="fas fa-play"></i> Start Mining
                </button>
            </div>
        </div>
    </div>

    <!-- NEW: Ad Display Modal -->
    <div id="adDisplayModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <button class="close-modal" onclick="closeAdDisplayModal()">&times;</button>
            <h2 class="form-title">Watch Ad to Earn Coins</h2>
            
            <div class="ad-display-container">
                <iframe class="ad-display-frame" id="adIframe" src=""></iframe>
            </div>
            
            <div class="ad-countdown" id="adDisplayCountdown">30</div>
            <div class="ad-progress-container">
                <div class="ad-progress-bar" id="adDisplayProgressBar"></div>
            </div>
            
            <div class="ad-info">
                <i class="fas fa-info-circle"></i> Please watch the ad for the full duration to earn coins
            </div>
            
            <div class="ad-controls">
                <button class="btn btn-secondary" onclick="closeAdDisplayModal()" id="cancelAdDisplayBtn">
                    <i class="fas fa-times"></i> Skip Ad
                </button>
                <button class="btn btn-success" onclick="completeAdView()" id="completeAdBtn" disabled>
                    <i class="fas fa-check"></i> Complete & Earn Coins
                </button>
            </div>
        </div>
    </div>

    <!-- Streak Reward Modal -->
    <div id="streakRewardModal" class="modal">
        <div class="modal-content streak-modal-content">
            <button class="close-modal" onclick="closeModal('streakRewardModal')">&times;</button>
            <div class="streak-celebration">
                <i class="fas fa-trophy"></i>
            </div>
            <h2 class="form-title" id="streakModalTitle">Daily Reward Claimed!</h2>
            
            <div style="margin: 20px 0; padding: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 10px;">
                <div style="font-size: 24px; color: var(--success); font-weight: 700; margin-bottom: 10px;" id="rewardSTC">+2 STC</div>
                <div style="color: #94a3b8;">STC Tokens Added</div>
            </div>
            
            <div style="margin: 15px 0; padding: 15px; background: rgba(245, 158, 11, 0.1); border-radius: 10px;">
                <div style="font-size: 20px; color: var(--warning); font-weight: 700; margin-bottom: 5px;" id="rewardCoins">+50 Coins</div>
                <div style="color: #94a3b8;">Daily Login Bonus</div>
            </div>
            
            <div style="margin: 25px 0;">
                <div style="font-size: 18px; color: var(--light); margin-bottom: 10px;">Your Current Streak</div>
                <div style="font-size: 36px; color: var(--warning); font-weight: 800;" id="modalStreak">0 Days</div>
                <div style="color: #94a3b8; margin-top: 5px;">Come back tomorrow for more!</div>
            </div>
            
            <button class="btn btn-primary" onclick="closeModal('streakRewardModal'); showPage('dashboard');" style="width: 100%;">
                <i class="fas fa-check"></i> Awesome!
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div>
                    <div class="logo" style="margin-bottom: 15px; font-size: 20px;">
                        <i class="fas fa-gem"></i>
                        STC-REWARDS
                    </div>
                    <p style="color: #94a3b8; max-width: 280px; font-size: 13px;">Earn cryptocurrency through ads, mining, and referrals. Join the 2026 launch of STC Token today.</p>
                </div>
                <div class="footer-links">
                    <h4>Platform</h4>
                    <ul>
                        <li><a href="#" onclick="showPage('home')">Home</a></li>
                        <li><a href="#" onclick="showPage('mining')">Mining</a></li>
                        <li><a href="#" onclick="showPage('ads')">Watch Ads</a></li>
                        <li><a href="#" onclick="showPage('referral')">Referral</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#" onclick="showPage('token'); setTimeout(() => showTokenTab('whitepaper'), 100);">White Paper</a></li>
                        <li><a href="#" onclick="showPage('token'); setTimeout(() => showTokenTab('roadmap'), 100);">Road Map</a></li>
                        <li><a href="#" onclick="showPage('posts')">STC Posts</a></li>
                        <li><a href="#" onclick="showPage('dailyLogin')">Daily Login</a></li>
                        <li><a href="#" onclick="showAuthModal('login')">Login</a></li>
                        <li><a href="#" onclick="showAuthModal('signup')">Sign Up</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="javascript:void(0)" onclick="showLegalModal('terms')">Terms of Service</a></li>
                        <li><a href="javascript:void(0)" onclick="showLegalModal('privacy')">Privacy Policy</a></li>
                        <li><a href="javascript:void(0)" onclick="showLegalModal('cookies')">Cookie Policy</a></li>
                        <li><a href="javascript:void(0)" onclick="showLegalModal('disclaimer')">Disclaimer</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>© 2026 STC-REWARDS. All rights reserved.</p>
                <p style="margin-top: 5px; font-size: 11px;">This is a Realstration platform. STC Token is a utility token within the STC-REWARDS ecosystem.</p>
                <p style="margin-top: 5px; font-size: 10px; color: #64748b;">STC Token launched in 2026 - First phase mining active | Estimated price: $5 (subject to market fluctuations) | 5000 coins = $1 USD</p>
            </div>
        </div>
    </footer>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDn4uLD3qNuEYpiXf_S8q_PVGzeaTlRthc",
            authDomain: "stc-rewards-b541f.firebaseapp.com",
            projectId: "stc-rewards-b541f",
            storageBucket: "stc-rewards-b541f.firebasestorage.app",
            messagingSenderId: "886121063816",
            appId: "1:886121063816:web:bb2ad55b5e05db7163c63d"
        };

        // Initialize Firebase
        let auth = null;
        try {
            firebase.initializeApp(firebaseConfig);
            auth = firebase.auth();
            console.log("Firebase initialized successfully");
        } catch (error) {
            console.log("Firebase initialization error:", error);
        }

        // UPDATED User data structure with referral mining bonus
        let user = {
            uid: null,
            loggedIn: false,
            name: "",
            email: "",
            photoURL: "",
            stc: 0,
            coins: 0,
            usdt: 0,
            referrals: 0,
            referralCode: "",
            referredBy: null, // NEW: Track who referred this user
            referrerBonus: 0, // NEW: Total mining bonus earned from referrals
            totalMined: 0,
            mining: false,
            miningStartTime: null,
            miningEndTime: null,
            joinDate: "",
            withdrawalHistory: [],
            // Daily Login Fields
            dailyLogin: {
                streak: 0,
                lastLoginDate: "",
                claimedToday: false,
                streakHistory: [],
                totalDaysLogged: 0,
                highestStreak: 0
            }
        };

        // STC Token price variables
        let stcPrice = 5.24;
        let priceFluctuationInterval = null;

        // Stats variables - UPDATED for slower miner count changes
        let activeUsers = 1000;
        let totalWithdrawn = 12075;
        let activeMiners = 950; // Start at 950
        let lastMinersUpdate = Date.now();
        const MINERS_UPDATE_INTERVAL = 120000; // 2 minutes in milliseconds

        // DOM elements
        let currentModal = null;
        let isProcessing = false;
        let activeNav = 'home';
        let activeFilter = 'all';
        let miningCheckInterval = null;
        let selectedWithdrawalMethod = 'usdt';
        let withdrawalFee = 1;
        let dailyLoginCheckInterval = null;
        let adMiningInterval = null; // For ad before mining
        let adDisplayInterval = null; // For ad display modal

        // AD URLs - YOUR 6 AD LINKS ADDED HERE
        const adUrls = [
            "https://otieu.com/4/10584090",
            "https://otieu.com/4/10584092",
            "https://otieu.com/4/10584093",
            "https://otieu.com/4/10546347",
            "https://otieu.com/4/10536264",
            "https://otieu.com/4/10536238"
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeFirebaseAuth();
            setupEventListeners();
            updateUI();
            
            // Update stats periodically
            setInterval(updateStats, 5000);
            
            // Set current date as max for date input
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('signupDob').max = today;
            
            // Check for active mining session on load
            checkAndRestoreMining();
            
            // Start periodic mining check
            startMiningChecker();
            
            // Start price fluctuation simulation
            startPriceFluctuation();
            
            // Initialize stats display
            updateStatsDisplay();
            
            // Setup withdrawal options
            setupWithdrawalOptions();
            
            // Update withdrawal fee display
            updateWithdrawalFee();
            
            // Start Daily Login Checker
            startDailyLoginChecker();
            
            // Update referral link
            updateReferralLink();
            
            // Setup ad buttons
            setupAdButtons();
        });

        // NEW: Setup ad buttons with click handlers
        function setupAdButtons() {
            document.querySelectorAll('.watch-ad-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    watchAdWithRealAds(this);
                });
            });
        }

        // NEW: Watch ad with real ad URLs
        function watchAdWithRealAds(button) {
            if (!user.loggedIn) {
                showAuthModal('login');
                return;
            }
            
            if (button.disabled) return;
            
            // Get ad parameters
            const min = parseInt(button.getAttribute('data-min'));
            const max = parseInt(button.getAttribute('data-max'));
            
            // Store the button data for later use
            currentAdButton = {
                element: button,
                min: min,
                max: max,
                originalText: button.innerHTML
            };
            
            // Select a random ad from the list
            const randomAdIndex = Math.floor(Math.random() * adUrls.length);
            const selectedAdUrl = adUrls[randomAdIndex];
            
            // Show the ad display modal
            showAdDisplayModal(selectedAdUrl);
        }

        // NEW: Show ad display modal
        function showAdDisplayModal(adUrl) {
            // Reset countdown
            document.getElementById('adDisplayCountdown').textContent = '30';
            document.getElementById('adDisplayProgressBar').style.width = '0%';
            document.getElementById('completeAdBtn').disabled = true;
            document.getElementById('cancelAdDisplayBtn').disabled = false;
            
            // Load the ad in iframe
            document.getElementById('adIframe').src = adUrl;
            
            // Show modal
            showModal('adDisplayModal');
            
            // Start countdown
            let countdown = 30;
            adDisplayInterval = setInterval(() => {
                countdown--;
                document.getElementById('adDisplayCountdown').textContent = countdown;
                const progress = ((30 - countdown) / 30) * 100;
                document.getElementById('adDisplayProgressBar').style.width = `${progress}%`;
                
                if (countdown <= 0) {
                    clearInterval(adDisplayInterval);
                    document.getElementById('completeAdBtn').disabled = false;
                    document.getElementById('cancelAdDisplayBtn').disabled = true;
                }
            }, 1000);
        }

        // NEW: Close ad display modal
        function closeAdDisplayModal() {
            if (adDisplayInterval) {
                clearInterval(adDisplayInterval);
            }
            
            // Clear iframe src to stop loading
            document.getElementById('adIframe').src = '';
            
            // Reset button if ad was cancelled
            if (currentAdButton && !currentAdButton.completed) {
                currentAdButton.element.disabled = false;
                currentAdButton.element.innerHTML = currentAdButton.originalText;
            }
            
            closeModal('adDisplayModal');
            currentAdButton = null;
        }

        // NEW: Complete ad view and give rewards
        function completeAdView() {
            if (!currentAdButton) return;
            
            if (adDisplayInterval) {
                clearInterval(adDisplayInterval);
            }
            
            // Calculate coins earned
            const min = currentAdButton.min;
            const max = currentAdButton.max;
            const coins = Math.floor(Math.random() * (max - min + 1)) + min;
            
            // Add coins to user balance
            user.coins += coins;
            
            // Save data
            saveUserData();
            updateUI();
            
            // Mark ad as completed
            currentAdButton.completed = true;
            currentAdButton.element.disabled = false;
            currentAdButton.element.innerHTML = currentAdButton.originalText;
            
            // Close modal
            closeModal('adDisplayModal');
            
            // Clear iframe src
            document.getElementById('adIframe').src = '';
            
            // Show notification
            showNotification(`You earned ${coins} coins! (5000 coins = $1)`);
            
            // Reset current ad button
            currentAdButton = null;
        }

        // NEW: Update referral link
        function updateReferralLink() {
            const referralLink = document.getElementById('referralLink');
            if (referralLink) {
                const refCode = user.referralCode || 'X8Y9Z7';
                referralLink.value = `${window.location.origin}${window.location.pathname}?ref=${refCode}`;
            }
        }

        // NEW: Copy referral link
        function copyReferralLink() {
            const referralLink = document.getElementById('referralLink');
            if (referralLink) {
                referralLink.select();
                document.execCommand('copy');
                showNotification('Referral link copied to clipboard! Share it with friends to earn 50 STC + 10% mining bonus.');
            }
        }

        // Start Daily Login Checker
        function startDailyLoginChecker() {
            if (dailyLoginCheckInterval) {
                clearInterval(dailyLoginCheckInterval);
            }
            
            dailyLoginCheckInterval = setInterval(() => {
                if (user.loggedIn) {
                    checkDailyLoginStatus();
                }
            }, 60000);
        }

        // Check Daily Login Status
        function checkDailyLoginStatus() {
            if (!user.loggedIn) return;
            
            const today = getCurrentDate();
            const yesterday = getYesterdayDate();
            
            // Initialize daily login object if it doesn't exist
            if (!user.dailyLogin) {
                user.dailyLogin = {
                    streak: 0,
                    lastLoginDate: "",
                    claimedToday: false,
                    streakHistory: [],
                    totalDaysLogged: 0,
                    highestStreak: 0
                };
            }
            
            // Check if this is first login
            if (!user.dailyLogin.lastLoginDate) {
                // First time logging in
                user.dailyLogin.streak = 1;
                user.dailyLogin.lastLoginDate = today;
                user.dailyLogin.claimedToday = false;
                user.dailyLogin.totalDaysLogged = 1;
                user.dailyLogin.highestStreak = 1;
                updateStreakHistory();
            } else if (user.dailyLogin.lastLoginDate === today) {
                // Already logged in today
                // Do nothing, reward already claimed or available
            } else if (user.dailyLogin.lastLoginDate === yesterday) {
                // Consecutive day - streak continues
                user.dailyLogin.streak++;
                user.dailyLogin.lastLoginDate = today;
                user.dailyLogin.claimedToday = false;
                user.dailyLogin.totalDaysLogged++;
                
                // Update highest streak if needed
                if (user.dailyLogin.streak > user.dailyLogin.highestStreak) {
                    user.dailyLogin.highestStreak = user.dailyLogin.streak;
                }
                
                updateStreakHistory();
            } else {
                // Streak broken - more than 1 day missed
                const lastLogin = new Date(user.dailyLogin.lastLoginDate);
                const current = new Date(today);
                const diffDays = Math.floor((current - lastLogin) / (1000 * 60 * 60 * 24));
                
                if (diffDays > 1) {
                    // Streak broken
                    user.dailyLogin.streak = 1;
                    user.dailyLogin.lastLoginDate = today;
                    user.dailyLogin.claimedToday = false;
                    user.dailyLogin.totalDaysLogged++;
                    updateStreakHistory();
                    
                    // Show streak broken notification if streak was > 1
                    if (user.dailyLogin.streakHistory.length > 0) {
                        showNotification('Daily login streak broken! Starting from Day 1.', 'warning');
                    }
                }
            }
            
            // Save and update UI
            saveUserData();
            updateStreakUI();
        }

        // Get Current Date in YYYY-MM-DD format
        function getCurrentDate() {
            const now = new Date();
            return now.toISOString().split('T')[0];
        }

        // Get Yesterday's Date
        function getYesterdayDate() {
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            return yesterday.toISOString().split('T')[0];
        }

        // Update Streak History Array
        function updateStreakHistory() {
            if (!user.dailyLogin.streakHistory) {
                user.dailyLogin.streakHistory = [];
            }
            
            const today = getCurrentDate();
            
            // Add today to history if not already there
            const todayIndex = user.dailyLogin.streakHistory.findIndex(day => day.date === today);
            
            if (todayIndex === -1) {
                // Add new day
                user.dailyLogin.streakHistory.push({
                    date: today,
                    claimed: user.dailyLogin.claimedToday,
                    streak: user.dailyLogin.streak
                });
                
                // Keep only last 30 days
                if (user.dailyLogin.streakHistory.length > 30) {
                    user.dailyLogin.streakHistory.shift();
                }
            } else {
                // Update existing day
                user.dailyLogin.streakHistory[todayIndex].claimed = user.dailyLogin.claimedToday;
                user.dailyLogin.streakHistory[todayIndex].streak = user.dailyLogin.streak;
            }
        }

        // Claim Daily Reward
        function claimDailyReward() {
            if (!user.loggedIn) {
                showAuthModal('login');
                return;
            }
            
            // Check if already claimed today
            if (user.dailyLogin.claimedToday) {
                showNotification('You have already claimed your daily reward today!', 'info');
                return;
            }
            
            // Calculate rewards
            let stcReward;
            if (user.dailyLogin.streak > 30) {
                stcReward = 60; // 60 STC after 30 days
            } else {
                stcReward = user.dailyLogin.streak * 2; // 2 STC per day
            }
            
            const coinReward = 50; // 50 coins every day
            
            // Add rewards to user balance
            user.stc += stcReward;
            user.coins += coinReward;
            
            // Update daily login status
            user.dailyLogin.claimedToday = true;
            updateStreakHistory();
            
            // Save data
            saveUserData();
            updateUI();
            updateStreakUI();
            
            // Show reward modal
            showRewardModal(stcReward, coinReward);
            
            // Show notification
            showNotification(`Daily reward claimed! ${stcReward} STC + ${coinReward} coins added.`, 'success');
        }

        // Show Reward Modal
        function showRewardModal(stcReward, coinReward) {
            document.getElementById('rewardSTC').textContent = `+${stcReward} STC`;
            document.getElementById('rewardCoins').textContent = `+${coinReward} Coins`;
            document.getElementById('modalStreak').textContent = `${user.dailyLogin.streak} Days`;
            
            // Set modal title based on streak
            let title = "Daily Reward Claimed!";
            if (user.dailyLogin.streak === 7) {
                title = "Week Streak Achieved!";
            } else if (user.dailyLogin.streak === 30) {
                title = "30-Day Milestone!";
            } else if (user.dailyLogin.streak > 30) {
                title = "Maintaining 30+ Day Streak!";
            }
            
            document.getElementById('streakModalTitle').textContent = title;
            showModal('streakRewardModal');
        }

        // Show Modal function
        function showModal(modalId) {
            closeAllModals();
            document.getElementById(modalId).classList.add('active');
            currentModal = modalId;
        }

        // Update Streak UI
        function updateStreakUI() {
            if (!user.loggedIn) return;
            
            // Update streak count
            const streak = user.dailyLogin.streak || 0;
            document.getElementById('streakCount').textContent = streak;
            document.getElementById('dashboardStreak').textContent = streak;
            
            // Calculate current and next rewards
            let currentSTC, nextSTC;
            if (streak > 30) {
                currentSTC = 60;
                nextSTC = 60; // Stays at 60 after 30 days
            } else {
                currentSTC = streak * 2;
                nextSTC = (streak + 1) * 2;
            }
            
            // Update reward displays
            document.getElementById('currentSTCReward').textContent = `${currentSTC} STC Today`;
            document.getElementById('streakFormula').textContent = streak > 30 ? 
                `Day ${streak}: 60 STC` : `Day ${streak}: ${currentSTC} STC`;
            
            // Update dashboard widgets
            const claimedText = user.dailyLogin.claimedToday ? " (Claimed)" : "";
            document.getElementById('todayReward').textContent = `${currentSTC} STC + 50 coins${claimedText}`;
            document.getElementById('nextReward').textContent = `${nextSTC} STC + 50 coins`;
            
            // Update status
            const statusElement = document.getElementById('streakStatus');
            const claimBtn = document.getElementById('dashboardClaimBtn');
            const dailyClaimBtn = document.getElementById('dailyClaimBtn');
            
            if (user.dailyLogin.claimedToday) {
                statusElement.textContent = "Reward Claimed";
                statusElement.style.color = "var(--success)";
                claimBtn.classList.add('claimed');
                claimBtn.innerHTML = '<i class="fas fa-check"></i> Reward Claimed Today';
                claimBtn.disabled = true;
                dailyClaimBtn.classList.add('claimed');
                dailyClaimBtn.innerHTML = '<i class="fas fa-check"></i> Reward Claimed Today';
                dailyClaimBtn.disabled = true;
            } else {
                statusElement.textContent = "Ready to claim";
                statusElement.style.color = "var(--warning)";
                claimBtn.classList.remove('claimed');
                claimBtn.innerHTML = '<i class="fas fa-gift"></i> Claim Daily Reward';
                claimBtn.disabled = false;
                dailyClaimBtn.classList.remove('claimed');
                dailyClaimBtn.innerHTML = '<i class="fas fa-gift"></i> Claim Today\'s Reward';
                dailyClaimBtn.disabled = false;
            }
            
            // Update streak calendar
            updateStreakCalendar();
            
            // Update login reminder
            updateLoginReminder();
        }

        // Update Streak Calendar
        function updateStreakCalendar() {
            const calendar = document.getElementById('streakCalendar');
            if (!calendar) return;
            
            calendar.innerHTML = '';
            const today = getCurrentDate();
            const streakHistory = user.dailyLogin.streakHistory || [];
            
            // Create calendar for last 30 days
            for (let i = 29; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const dateStr = date.toISOString().split('T')[0];
                const dayNum = 30 - i;
                
                // Check if this day is in streak history
                const dayData = streakHistory.find(day => day.date === dateStr);
                const isToday = dateStr === today;
                const isPast = dateStr < today;
                
                const dayBox = document.createElement('div');
                dayBox.className = 'day-box';
                
                // Calculate reward for this day
                let rewardSTC;
                if (dayNum > 30) {
                    rewardSTC = 60;
                } else {
                    rewardSTC = dayNum * 2;
                }
                
                // Set class based on status
                if (isToday) {
                    dayBox.classList.add('current');
                    dayBox.title = `Today - Day ${dayNum}: ${rewardSTC} STC`;
                } else if (dayData && dayData.claimed) {
                    dayBox.classList.add('completed');
                    dayBox.title = `Day ${dayNum}: Claimed ${rewardSTC} STC`;
                } else if (isPast) {
                    dayBox.classList.add('missed');
                    dayBox.title = `Day ${dayNum}: Missed`;
                } else {
                    dayBox.classList.add('future');
                    dayBox.title = `Day ${dayNum}: ${rewardSTC} STC`;
                }
                
                dayBox.textContent = dayNum;
                
                // Add reward tooltip
                const rewardSpan = document.createElement('span');
                rewardSpan.className = 'day-reward';
                rewardSpan.textContent = `${rewardSTC} STC`;
                dayBox.appendChild(rewardSpan);
                
                calendar.appendChild(dayBox);
            }
        }

        // Update Login Reminder
        function updateLoginReminder() {
            const reminder = document.getElementById('loginReminder');
            if (!reminder) return;
            
            if (!user.dailyLogin.claimedToday) {
                reminder.innerHTML = '<i class="fas fa-bell"></i> <span>Claim your daily reward before it resets at midnight UTC!</span>';
                reminder.style.background = 'rgba(245, 158, 11, 0.1)';
                reminder.style.borderColor = 'var(--warning)';
            } else {
                reminder.innerHTML = '<i class="fas fa-check-circle"></i> <span>Daily reward claimed! Come back tomorrow to continue your streak.</span>';
                reminder.style.background = 'rgba(16, 185, 129, 0.1)';
                reminder.style.borderColor = 'var(--success)';
            }
        }

        // Setup withdrawal options
        function setupWithdrawalOptions() {
            const options = document.querySelectorAll('.withdrawal-option');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from all options
                    options.forEach(opt => opt.classList.remove('selected'));
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Update selected method
                    selectedWithdrawalMethod = this.getAttribute('data-method');
                    withdrawalFee = parseInt(this.getAttribute('data-fee'));
                    const network = this.getAttribute('data-network');
                    
                    // Update network dropdown for crypto methods
                    if (selectedWithdrawalMethod !== 'bank') {
                        document.getElementById('cryptoForm').style.display = 'block';
                        document.getElementById('bankForm').style.display = 'none';
                        
                        // Update wallet label
                        const methodNames = {
                            'usdt': 'USDT',
                            'btc': 'Bitcoin',
                            'eth': 'Ethereum',
                            'usdc': 'USDC'
                        };
                        document.getElementById('walletLabel').textContent = 
                            `${methodNames[selectedWithdrawalMethod]} Wallet Address`;
                        
                        // Update placeholder
                        document.getElementById('walletAddress').placeholder = 
                            `Enter your ${methodNames[selectedWithdrawalMethod]} wallet address`;
                        
                        // Update network dropdown
                        const networkSelect = document.getElementById('withdrawNetwork');
                        networkSelect.innerHTML = '';
                        
                        if (selectedWithdrawalMethod === 'usdt') {
                            networkSelect.innerHTML = `
                                <option value="TRC20">TRC20 (Recommended)</option>
                                <option value="ERC20">ERC20</option>
                                <option value="BEP20">BEP20</option>
                            `;
                        } else if (selectedWithdrawalMethod === 'btc') {
                            networkSelect.innerHTML = `
                                <option value="BTC">Bitcoin Network</option>
                                <option value="BTC-Lightning">Lightning Network</option>
                            `;
                        } else if (selectedWithdrawalMethod === 'eth') {
                            networkSelect.innerHTML = `
                                <option value="ERC20">ERC20</option>
                                <option value="Arbitrum">Arbitrum</option>
                                <option value="Optimism">Optimism</option>
                            `;
                        } else if (selectedWithdrawalMethod === 'usdc') {
                            networkSelect.innerHTML = `
                                <option value="ERC20">ERC20</option>
                                <option value="TRC20">TRC20</option>
                                <option value="Polygon">Polygon</option>
                            `;
                        }
                    } else {
                        // Bank transfer selected
                        document.getElementById('cryptoForm').style.display = 'none';
                        document.getElementById('bankForm').style.display = 'block';
                        document.getElementById('bankForm').classList.add('active');
                    }
                    
                    // Update fee display
                    updateWithdrawalFee();
                });
            });
            
            // Listen to amount input changes
            document.getElementById('withdrawAmount').addEventListener('input', updateWithdrawalFee);
        }

        // Update withdrawal fee display
        function updateWithdrawalFee() {
            const amount = parseFloat(document.getElementById('withdrawAmount').value) || 5;
            const fee = (amount * withdrawalFee) / 100;
            const netAmount = amount - fee;
            
            document.getElementById('displayAmount').textContent = amount.toFixed(2);
            document.getElementById('feePercent').textContent = withdrawalFee;
            document.getElementById('feeAmount').textContent = fee.toFixed(2);
            document.getElementById('netAmount').textContent = netAmount.toFixed(2);
            
            // Update available balance
            document.getElementById('availableBalance').textContent = user.usdt.toFixed(2);
        }

        // Update stats display - UPDATED for slower miner updates
        function updateStatsDisplay() {
            document.getElementById('totalUsers').textContent = activeUsers.toLocaleString();
            document.getElementById('totalWithdrawn').textContent = '$' + totalWithdrawn.toLocaleString();
            
            // Update active miners only every 2 minutes
            const now = Date.now();
            if (now - lastMinersUpdate > MINERS_UPDATE_INTERVAL) {
                // Random number between 900 and 1000
                activeMiners = Math.floor(Math.random() * 101) + 900;
                lastMinersUpdate = now;
                document.getElementById('activeMiners').textContent = activeMiners.toLocaleString();
            }
        }

        // Simulate STC price fluctuations
        function startPriceFluctuation() {
            if (priceFluctuationInterval) {
                clearInterval(priceFluctuationInterval);
            }
            
            // Update price every 10 seconds with small fluctuations
            priceFluctuationInterval = setInterval(() => {
                // Random fluctuation between -0.5% to +0.5%
                const changePercent = (Math.random() - 0.5) * 0.01;
                stcPrice = stcPrice * (1 + changePercent);
                
                // Keep price between $4.50 and $5.50 (around estimated $5)
                if (stcPrice < 4.50) stcPrice = 4.50;
                if (stcPrice > 5.50) stcPrice = 5.50;
                
                // Update all price displays
                updatePriceDisplays();
            }, 10000);
        }

        // Update all price displays
        function updatePriceDisplays() {
            // Update price on homepage
            const priceElement = document.querySelector('.hero .stat-box:nth-child(2) .stat-value');
            if (priceElement) {
                const change = ((stcPrice - 5) / 5 * 100).toFixed(1);
                const marketClass = change >= 0 ? 'market-up' : 'market-down';
                priceElement.innerHTML = `$${stcPrice.toFixed(2)}<span class="market-indicator ${marketClass}">${change >= 0 ? '+' : ''}${change}%</span>`;
            }
            
            // Update price on dashboard
            document.getElementById('stcPrice').textContent = stcPrice.toFixed(2);
            
            // Update mining page price
            const miningPriceElement = document.querySelector('.mining-container .price-fluctuation');
            if (miningPriceElement) {
                miningPriceElement.textContent = `$${stcPrice.toFixed(2)}`;
            }
            
            // Update token page price
            const tokenPriceElements = document.querySelectorAll('.token-content .price-fluctuation');
            tokenPriceElements.forEach(el => {
                el.textContent = `$${stcPrice.toFixed(2)}`;
            });
            
            // Update total mined value
            updateTotalMinedValue();
            
            // Update referral earnings value
            updateReferralEarningsValue();
            
            // Update coin progress
            updateCoinProgress();
            
            // Update mining bonus display
            document.getElementById('miningBonus').textContent = (user.referrerBonus || 0) + ' STC';
        }

        // Update coin progress
        function updateCoinProgress() {
            const coinValue = user.coins / 5000; // 5000 coins = $1
            const progressPercent = Math.min((coinValue / 5) * 100, 100); // $5 minimum
            
            // Update dashboard progress
            document.getElementById('coinProgress').style.width = progressPercent + '%';
            document.getElementById('coinProgressText').textContent = progressPercent.toFixed(1) + '%';
            
            // Update coin value
            document.getElementById('coinValue').textContent = coinValue.toFixed(2);
            
            // Update ads page progress
            document.getElementById('adsCoinProgress').style.width = progressPercent + '%';
            document.getElementById('adsProgressText').textContent = progressPercent.toFixed(1) + '%';
        }

        // Update total mined value
        function updateTotalMinedValue() {
            const totalMinedElement = document.getElementById('totalMinedValue');
            if (totalMinedElement) {
                const totalMined = user.totalMined || 0;
                totalMinedElement.textContent = (totalMined * stcPrice).toFixed(2);
            }
        }

        // Update referral earnings value
        function updateReferralEarningsValue() {
            const refEarningsValueElement = document.getElementById('refEarningsValue');
            if (refEarningsValueElement) {
                const refEarnings = (user.referrals || 0) * 50; // 50 STC per referral during launch
                refEarningsValueElement.textContent = (refEarnings * stcPrice).toFixed(2);
            }
        }

        // Update live stats - UPDATED for slower updates
        function updateStats() {
            // Active Users: Slowly increase (1-3 every 5 seconds)
            if (Math.random() > 0.3) {
                activeUsers += Math.floor(Math.random() * 3) + 1;
                document.getElementById('totalUsers').textContent = activeUsers.toLocaleString();
            }
            
            // Total Withdrawn: Slowly increase (10-20 every 5 seconds)
            if (Math.random() > 0.4) {
                totalWithdrawn += Math.floor(Math.random() * 11) + 10;
                document.getElementById('totalWithdrawn').textContent = '$' + totalWithdrawn.toLocaleString();
            }
            
            // Update stats display (handles miners with 2-minute delay)
            updateStatsDisplay();
            
            // Update price displays
            updatePriceDisplays();
        }

        // Start periodic mining checker
        function startMiningChecker() {
            if (miningCheckInterval) {
                clearInterval(miningCheckInterval);
            }
            
            miningCheckInterval = setInterval(() => {
                if (user.loggedIn && user.mining && user.miningEndTime) {
                    const now = Date.now();
                    if (now >= user.miningEndTime) {
                        completeMiningSession();
                    } else {
                        updateMiningTimer();
                    }
                }
            }, 1000);
        }

        // Enhanced mining restoration
        function checkAndRestoreMining() {
            if (!user.loggedIn) return;
            
            // Check if there's an active mining session
            if (user.mining && user.miningEndTime) {
                const now = Date.now();
                
                if (now >= user.miningEndTime) {
                    // Mining completed while away
                    completeMiningSession();
                } else {
                    // Resume mining
                    resumeMiningSession();
                }
            }
        }

        // Resume mining session
        function resumeMiningSession() {
            if (!user.mining || !user.miningEndTime) return;
            
            const now = Date.now();
            const remainingTime = Math.max(0, user.miningEndTime - now);
            
            // Update UI if on mining page
            if (activeNav === 'mining') {
                updateMiningUI(remainingTime);
                
                const miningBtn = document.getElementById('miningBtn');
                const miningStatus = document.getElementById('miningStatusText');
                if (miningBtn && miningStatus) {
                    miningBtn.textContent = 'Stop Mining';
                    miningBtn.classList.remove('btn-mining');
                    miningBtn.classList.add('mining-active');
                    miningStatus.textContent = 'Mining in progress...';
                    miningStatus.style.color = '#10b981';
                }
            }
            
            // Add persistence notice
            showMiningPersistenceNotice();
            
            console.log("Mining session resumed with", Math.floor(remainingTime / 1000), "seconds remaining");
        }

        // Complete mining session - UPDATED with referral bonus
        function completeMiningSession() {
            if (!user.mining) return;
            
            user.mining = false;
            user.miningStartTime = null;
            user.miningEndTime = null;
            
            // Calculate rewards based on current price
            const stcReward = 12;
            user.stc += stcReward;
            user.totalMined += stcReward;
            
            // NEW: Distribute 10% to referrer if exists
            if (user.referredBy) {
                const referrerBonus = stcReward * 0.10; // 10% bonus
                
                // In a real app, you would update the referrer's balance in database
                // For demo, we'll store it in the user's data
                if (!user.referrerBonus) user.referrerBonus = 0;
                user.referrerBonus += referrerBonus;
                
                // Show notification about referrer bonus
                showNotification(`Referrer earned ${referrerBonus.toFixed(2)} STC from your mining!`, 'info');
            }
            
            // Save user data
            saveUserData();
            
            // Update UI
            updateUI();
            
            // Update mining page if active
            if (activeNav === 'mining') {
                const miningBtn = document.getElementById('miningBtn');
                const miningStatus = document.getElementById('miningStatusText');
                if (miningBtn && miningStatus) {
                    miningBtn.textContent = 'Watch Ad to Start Mining';
                    miningBtn.classList.remove('mining-active');
                    miningBtn.classList.add('btn-mining');
                    miningStatus.textContent = 'Mining completed! Ready to start again.';
                    miningStatus.style.color = '';
                    
                    document.getElementById('miningTimer').textContent = '06:00:00';
                    document.getElementById('miningProgress').style.width = '0%';
                }
            }
            
            // Show notification with current value
            const rewardValue = (stcReward * stcPrice).toFixed(2);
            showNotification(`Mining completed! You earned ${stcReward} STC tokens (≈ $${rewardValue} at current price).`);
            
            // Remove persistence notice
            removeMiningPersistenceNotice();
        }

        // Show mining persistence notice
        function showMiningPersistenceNotice() {
            removeMiningPersistenceNotice();
            
            if (activeNav === 'mining') {
                const notice = document.createElement('div');
                notice.className = 'mining-persistence-notice';
                notice.id = 'miningPersistenceNotice';
                notice.innerHTML = `
                    <i class="fas fa-info-circle"></i>
                    Your mining session will continue even if you close this page or navigate away.
                    Progress is saved automatically. This is the first phase of STC mining.
                `;
                
                const miningStatus = document.querySelector('.mining-status');
                if (miningStatus) {
                    miningStatus.appendChild(notice);
                }
            }
        }

        // Remove mining persistence notice
        function removeMiningPersistenceNotice() {
            const existingNotice = document.getElementById('miningPersistenceNotice');
            if (existingNotice) {
                existingNotice.remove();
            }
        }

        // Update mining timer display
        function updateMiningTimer() {
            if (!user.mining || !user.miningEndTime) return;
            
            const now = Date.now();
            const remainingTime = Math.max(0, user.miningEndTime - now);
            
            updateMiningUI(remainingTime);
            
            // Auto-save progress every 30 seconds
            if (Math.floor(remainingTime / 1000) % 30 === 0) {
                saveUserData();
            }
        }

        // Update mining UI
        function updateMiningUI(remainingTime) {
            if (activeNav !== 'mining') return;
            
            const hours = Math.floor(remainingTime / 3600000);
            const minutes = Math.floor((remainingTime % 3600000) / 60000);
            const seconds = Math.floor((remainingTime % 60000) / 1000);
            
            const timerElement = document.getElementById('miningTimer');
            if (timerElement) {
                timerElement.textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            const progress = ((21600000 - remainingTime) / 21600000) * 100;
            const progressBar = document.getElementById('miningProgress');
            if (progressBar) {
                progressBar.style.width = `${progress}%`;
            }
        }

        // Show token tab
        function showTokenTab(tabName) {
            // Update active tab button
            document.querySelectorAll('.token-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Hide all tab contents
            document.querySelectorAll('.token-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(`${tabName}Tab`).classList.add('active');
        }

        // Download whitepaper function
        function downloadWhitepaper() {
            showNotification('White Paper download started...', 'info');
            
            // Simulate download
            setTimeout(() => {
                showNotification('White Paper downloaded successfully!', 'success');
            }, 2000);
        }

        // NEW: Show ad before mining
        function showAdBeforeMining() {
            if (!user.loggedIn) {
                showAuthModal('login');
                return;
            }
            
            if (user.mining) {
                // Already mining, show stop option
                stopMining();
                const miningBtn = document.getElementById('miningBtn');
                const miningStatus = document.getElementById('miningStatusText');
                if (miningBtn && miningStatus) {
                    miningBtn.textContent = 'Watch Ad to Start Mining';
                    miningBtn.classList.remove('mining-active');
                    miningBtn.classList.add('btn-mining');
                    miningStatus.textContent = 'Ready to Start';
                    miningStatus.style.color = '';
                }
                showNotification('Mining stopped');
                removeMiningPersistenceNotice();
                return;
            }
            
            // Show ad modal
            showModal('adMiningModal');
            
            // Reset ad timer
            document.getElementById('adCountdown').textContent = '30';
            document.getElementById('adProgressBar').style.width = '0%';
            document.getElementById('startMiningBtn').disabled = true;
            document.getElementById('cancelAdBtn').disabled = false;
            
            let countdown = 30;
            adMiningInterval = setInterval(() => {
                countdown--;
                document.getElementById('adCountdown').textContent = countdown;
                const progress = ((30 - countdown) / 30) * 100;
                document.getElementById('adProgressBar').style.width = `${progress}%`;
                
                if (countdown <= 0) {
                    clearInterval(adMiningInterval);
                    document.getElementById('startMiningBtn').disabled = false;
                    document.getElementById('cancelAdBtn').disabled = true;
                    showNotification('Ad completed! You can now start mining.', 'success');
                }
            }, 1000);
        }

        // NEW: Start mining after ad
        function startMiningAfterAd() {
            if (adMiningInterval) {
                clearInterval(adMiningInterval);
            }
            
            // Give bonus coins for watching ad
            user.coins += 50;
            showNotification('You earned 50 bonus coins for watching the ad!', 'success');
            
            // Start mining
            startMining();
            closeModal('adMiningModal');
            
            const miningBtn = document.getElementById('miningBtn');
            const miningStatus = document.getElementById('miningStatusText');
            if (miningBtn && miningStatus) {
                miningBtn.textContent = 'Stop Mining';
                miningBtn.classList.remove('btn-mining');
                miningBtn.classList.add('mining-active');
                miningStatus.textContent = 'Mining in progress...';
                miningStatus.style.color = '#10b981';
            }
            
            showNotification('Mining started! Session will complete in 6 hours. This is the first phase of STC mining.');
            showMiningPersistenceNotice();
            
            // Save user data
            saveUserData();
            updateUI();
        }

        // Start mining function
        function startMining() {
            user.mining = true;
            user.miningStartTime = Date.now();
            user.miningEndTime = Date.now() + (6 * 60 * 60 * 1000); // 6 hours from now
            
            // Update UI immediately
            updateMiningUI(user.miningEndTime - Date.now());
        }

        // Stop mining function
        function stopMining() {
            user.mining = false;
            user.miningStartTime = null;
            user.miningEndTime = null;
            
            // Reset UI if on mining page
            if (activeNav === 'mining') {
                document.getElementById('miningTimer').textContent = '06:00:00';
                document.getElementById('miningProgress').style.width = '0%';
            }
        }

        // Initialize Firebase Authentication
        function initializeFirebaseAuth() {
            if (!auth) {
                console.log("Firebase auth not initialized");
                return;
            }

            // Listen for auth state changes
            auth.onAuthStateChanged((firebaseUser) => {
                if (firebaseUser) {
                    // User is signed in
                    handleFirebaseUser(firebaseUser);
                } else {
                    // User is signed out
                    handleLogout();
                }
            });
        }

        // UPDATED: Handle Firebase user with referral tracking
        function handleFirebaseUser(firebaseUser) {
            user.uid = firebaseUser.uid;
            user.loggedIn = true;
            user.name = firebaseUser.displayName || firebaseUser.email.split('@')[0];
            user.email = firebaseUser.email;
            user.photoURL = firebaseUser.photoURL || "https://ui-avatars.com/api/?name=" + encodeURIComponent(user.name) + "&background=6366f1&color=fff";
            user.joinDate = new Date().toLocaleDateString();
            
            // Load user data from localStorage
            loadUserData();
            
            // If new user (no data saved), initialize with default values
            if (!user.referralCode) {
                user.referralCode = generateReferralCode();
                
                // Check for referral code
                const urlParams = new URLSearchParams(window.location.search);
                const refCode = urlParams.get('ref') || localStorage.getItem('referral_code');
                if (refCode) {
                    // Store referrer info
                    user.referredBy = refCode;
                    
                    // Give STC bonus (LAUNCH BONUS: 50 STC instead of 20)
                    user.stc += 50;
                    
                    // In a real app, you would update the referrer's data here
                    // For demo, we'll just show a notification
                    showNotification('Welcome to STC 2026 Launch! You received 50 STC bonus from referral. Your referrer will earn 10% of your mining rewards.');
                    
                    localStorage.removeItem('referral_code');
                }
            }
            
            // Check daily login status
            checkDailyLoginStatus();
            
            saveUserData();
            updateUI();
            closeAllModals();
            showPage('dashboard');
            
            // Update UI with Firebase user info
            document.getElementById('userAvatar').src = user.photoURL;
            document.getElementById('userNameDisplay').textContent = user.name;
            
            showNotification('Welcome to STC 2026 Launch, ' + user.name + '!');
            
            // Update referral link
            updateReferralLink();
            
            // Check for mining session
            checkAndRestoreMining();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Form submissions
            document.getElementById('loginForm')?.addEventListener('submit', handleEmailLogin);
            document.getElementById('signupForm')?.addEventListener('submit', handleEmailSignup);
            
            // Close modals on ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && currentModal) {
                    closeModal(currentModal);
                }
            });
            
            // Close modals on outside click
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    closeAllModals();
                }
            });
            
            // Save mining state before page unload
            window.addEventListener('beforeunload', function() {
                if (user.mining) {
                    saveUserData();
                }
            });
        }

        // Generate random referral code
        function generateReferralCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 6; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        // Page navigation
        function showPage(pageId) {
            if (pageId === 'dashboard' && !user.loggedIn) {
                showNotification('Please login to access dashboard', 'warning');
                showAuthModal('login');
                return;
            }
            
            if (pageId === 'withdrawalHistory' && !user.loggedIn) {
                showNotification('Please login to view withdrawal history', 'warning');
                showAuthModal('login');
                return;
            }
            
            if (pageId === 'dailyLogin' && !user.loggedIn) {
                showNotification('Please login to access daily login rewards', 'warning');
                showAuthModal('login');
                return;
            }
            
            if (pageId === 'posts' && !user.loggedIn) {
                showNotification('Please login to view STC posts', 'warning');
                showAuthModal('login');
                return;
            }
            
            // Update active nav
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`.nav-links a[onclick*="${pageId}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            activeNav = pageId;
            
            // Load withdrawal history if on that page
            if (pageId === 'withdrawalHistory') {
                loadWithdrawalHistory();
            }
            
            // Update streak UI if on daily login page
            if (pageId === 'dailyLogin') {
                updateStreakUI();
            }
            
            // Update header buttons
            updateHeaderButtons();
            
            // Show/hide mining persistence notice
            if (pageId === 'mining' && user.mining) {
                showMiningPersistenceNotice();
                updateMiningTimer();
            } else {
                removeMiningPersistenceNotice();
            }
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Update header buttons based on login state
        function updateHeaderButtons() {
            const loginBtn = document.getElementById('loginBtn');
            const signupBtn = document.getElementById('signupBtn');
            const userProfile = document.getElementById('userProfile');
            
            if (user.loggedIn) {
                loginBtn.style.display = 'none';
                signupBtn.style.display = 'none';
                userProfile.style.display = 'flex';
            } else {
                loginBtn.style.display = 'inline-flex';
                signupBtn.style.display = 'inline-flex';
                userProfile.style.display = 'none';
            }
        }

        // Modal handling
        function showAuthModal(type) {
            closeAllModals();
            currentModal = type === 'login' ? 'loginModal' : 'signupModal';
            document.getElementById(currentModal).classList.add('active');
        }

        function closeModal(modalId) {
            if (!modalId) return;
            document.getElementById(modalId).classList.remove('active');
            currentModal = null;
            resetFormButtons();
            
            // Clear ad interval if ad modal is closed
            if (modalId === 'adMiningModal' && adMiningInterval) {
                clearInterval(adMiningInterval);
                adMiningInterval = null;
            }
            
            if (modalId === 'adDisplayModal' && adDisplayInterval) {
                clearInterval(adDisplayInterval);
                adDisplayInterval = null;
            }
        }

        function closeAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
            currentModal = null;
            resetFormButtons();
            
            // Clear ad intervals
            if (adMiningInterval) {
                clearInterval(adMiningInterval);
                adMiningInterval = null;
            }
            
            if (adDisplayInterval) {
                clearInterval(adDisplayInterval);
                adDisplayInterval = null;
            }
        }

        function switchToSignup() {
            closeModal('loginModal');
            showAuthModal('signup');
        }

        function switchToLogin() {
            closeModal('signupModal');
            showAuthModal('login');
        }

        // Show notification
        function showNotification(message, type = 'success') {
            // Remove existing notification
            const existing = document.querySelector('.notification');
            if (existing) existing.remove();
            
            // Create notification
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 3000);
        }

        // Set button loading state
        function setButtonLoading(buttonId, isLoading) {
            const button = document.getElementById(buttonId);
            if (!button) return;
            
            if (isLoading) {
                button.disabled = true;
                button.innerHTML = '<div class="spinner"></div>';
            } else {
                button.disabled = false;
                if (buttonId === 'loginSubmitBtn') {
                    button.innerHTML = 'Login';
                } else if (buttonId === 'signupSubmitBtn') {
                    button.innerHTML = 'Join STC 2026 Launch';
                } else if (buttonId === 'withdrawSubmitBtn') {
                    button.innerHTML = '<i class="fas fa-check"></i> Confirm Withdrawal';
                } else if (buttonId === 'googleLoginBtn' || buttonId === 'googleSignupBtn') {
                    button.innerHTML = '<i class="fab fa-google"></i> ' + (buttonId === 'googleLoginBtn' ? 'Continue with Google' : 'Sign up with Google');
                }
            }
        }

        // Reset all form buttons
        function resetFormButtons() {
            setButtonLoading('loginSubmitBtn', false);
            setButtonLoading('signupSubmitBtn', false);
            setButtonLoading('withdrawSubmitBtn', false);
            setButtonLoading('googleLoginBtn', false);
            setButtonLoading('googleSignupBtn', false);
            isProcessing = false;
        }

        // Google authentication with Firebase
        async function googleAuth() {
            if (!auth) {
                showNotification('Authentication service is not available. Please refresh the page.', 'error');
                return;
            }
            
            if (isProcessing) return;
            isProcessing = true;
            
            const isSignup = currentModal === 'signupModal';
            setButtonLoading(isSignup ? 'googleSignupBtn' : 'googleLoginBtn', true);
            
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                // Add scopes
                provider.addScope('profile');
                provider.addScope('email');
                
                // Sign in with popup
                await auth.signInWithPopup(provider);
                // User is automatically handled by onAuthStateChanged
            } catch (error) {
                console.error("Google Auth Error:", error);
                showNotification('Failed to sign in with Google: ' + error.message, 'error');
                isProcessing = false;
                setButtonLoading(isSignup ? 'googleSignupBtn' : 'googleLoginBtn', false);
            }
        }

        // Email/Password login
        async function handleEmailLogin(event) {
            event.preventDefault();
            if (!auth) {
                showNotification('Authentication service is not available. Please refresh the page.', 'error');
                return;
            }
            
            if (isProcessing) return;
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (password.length !== 9) {
                showNotification('Password must be exactly 9 characters', 'error');
                return;
            }
            
            isProcessing = true;
            setButtonLoading('loginSubmitBtn', true);
            
            try {
                await auth.signInWithEmailAndPassword(email, password);
                // User is automatically handled by onAuthStateChanged
            } catch (error) {
                console.error("Email Login Error:", error);
                showNotification('Login failed: ' + error.message, 'error');
                isProcessing = false;
                setButtonLoading('loginSubmitBtn', false);
            }
        }

        // Email/Password signup
        async function handleEmailSignup(event) {
            event.preventDefault();
            if (!auth) {
                showNotification('Authentication service is not available. Please refresh the page.', 'error');
                return;
            }
            
            if (isProcessing) return;
            
            const name = document.getElementById('signupName').value;
            const dob = document.getElementById('signupDob').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const referral = document.getElementById('signupReferral').value.trim();
            
            if (password.length !== 9) {
                showNotification('Password must be exactly 9 characters', 'error');
                return;
            }
            
            // Check if user is at least 18 years old
            const birthDate = new Date(dob);
            const age = new Date().getFullYear() - birthDate.getFullYear();
            if (age < 18) {
                showNotification('You must be at least 18 years old to register', 'error');
                return;
            }
            
            isProcessing = true;
            setButtonLoading('signupSubmitBtn', true);
            
            try {
                // Save referral code for later use
                if (referral) {
                    localStorage.setItem('referral_code', referral);
                }
                
                // Create user with email/password
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                
                // Update profile with name
                await userCredential.user.updateProfile({
                    displayName: name
                });
                
                // User is automatically handled by onAuthStateChanged
            } catch (error) {
                console.error("Email Signup Error:", error);
                showNotification('Signup failed: ' + error.message, 'error');
                isProcessing = false;
                setButtonLoading('signupSubmitBtn', false);
            }
        }

        // Start mining from home button
        function startMiningFromHome() {
            if (!user.loggedIn) {
                showAuthModal('login');
                return;
            }
            showPage('mining');
            setTimeout(() => {
                if (!user.mining) {
                    showAdBeforeMining();
                }
            }, 300);
        }

        // OLD: Watch ad (now replaced with watchAdWithRealAds)
        function watchAd(button) {
            // This function is kept for backward compatibility
            watchAdWithRealAds(button);
        }

        // Convert coins to USDT (5000 coins = $1)
        function convertCoins() {
            if (!user.loggedIn) {
                showAuthModal('login');
                return;
            }
            
            if (user.coins < 5000) {
                showNotification('Minimum 5000 coins required for conversion ($1)', 'error');
                return;
            }
            
            const usdt = user.coins / 5000; // 5000 coins = $1
            user.usdt += usdt;
            const convertedCoins = user.coins;
            user.coins = 0;
            saveUserData();
            updateUI();
            showNotification(`Converted ${convertedCoins} coins to ${usdt.toFixed(2)} USDT!`);
        }

        // Withdrawal
        function showWithdrawModal() {
            if (!user.loggedIn) {
                showAuthModal('login');
                return;
            }
            
            if (user.usdt < 5) {
                showNotification('Minimum $5 USD required for withdrawal (25000 coins)', 'error');
                return;
            }
            
            document.getElementById('withdrawAmount').value = Math.max(5, user.usdt).toFixed(2);
            currentModal = 'withdrawModal';
            document.getElementById('withdrawModal').classList.add('active');
            
            // Reset forms
            document.getElementById('cryptoForm').style.display = 'block';
            document.getElementById('bankForm').style.display = 'none';
            document.getElementById('bankForm').classList.remove('active');
            
            // Reset selected method
            document.querySelectorAll('.withdrawal-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector('.withdrawal-option[data-method="usdt"]').classList.add('selected');
            selectedWithdrawalMethod = 'usdt';
            withdrawalFee = 1;
            
            // Update fee display
            updateWithdrawalFee();
        }

        // Process withdrawal
        async function processWithdrawal() {
            if (isProcessing) return;
            
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const wallet = document.getElementById('walletAddress').value.trim();
            const network = document.getElementById('withdrawNetwork').value;
            const bankName = document.getElementById('bankName').value.trim();
            const accountHolder = document.getElementById('accountHolder').value.trim();
            const accountNumber = document.getElementById('accountNumber').value.trim();
            const routingCode = document.getElementById('routingCode').value.trim();
            
            if (amount < 5) {
                showNotification('Minimum withdrawal is $5', 'error');
                return;
            }
            
            if (amount > user.usdt) {
                showNotification('Insufficient USDT balance', 'error');
                return;
            }
            
            // Validate based on method
            if (selectedWithdrawalMethod !== 'bank') {
                if (!wallet) {
                    showNotification('Please enter wallet address', 'error');
                    return;
                }
                
                if (!isValidCryptoAddress(wallet, selectedWithdrawalMethod)) {
                    showNotification('Please enter a valid wallet address', 'error');
                    return;
                }
            } else {
                if (!bankName || !accountHolder || !accountNumber || !routingCode) {
                    showNotification('Please fill all bank transfer details', 'error');
                    return;
                }
            }
            
            isProcessing = true;
            setButtonLoading('withdrawSubmitBtn', true);
            
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Calculate fee and net amount
                const fee = (amount * withdrawalFee) / 100;
                const netAmount = amount - fee;
                
                // Create withdrawal record
                const withdrawal = {
                    id: 'WD' + Date.now() + Math.floor(Math.random() * 1000),
                    date: new Date().toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    }),
                    amount: amount,
                    netAmount: netAmount,
                    fee: fee,
                    method: getMethodName(selectedWithdrawalMethod),
                    details: selectedWithdrawalMethod !== 'bank' ? 
                        `${wallet.substring(0, 8)}...${wallet.substring(wallet.length - 8)} (${network})` :
                        `${accountHolder} - ${bankName}`,
                    network: selectedWithdrawalMethod !== 'bank' ? network : 'Bank Transfer',
                    status: 'pending',
                    transactionId: null
                };
                
                // Update user balance
                user.usdt -= amount;
                
                // Add to withdrawal history
                if (!user.withdrawalHistory) {
                    user.withdrawalHistory = [];
                }
                user.withdrawalHistory.unshift(withdrawal);
                
                // Save data
                saveUserData();
                updateUI();
                
                // Close modal and show success
                closeModal('withdrawModal');
                
                // Clear forms
                document.getElementById('walletAddress').value = '';
                document.getElementById('bankName').value = '';
                document.getElementById('accountHolder').value = '';
                document.getElementById('accountNumber').value = '';
                document.getElementById('routingCode').value = '';
                
                const methodName = getMethodName(selectedWithdrawalMethod);
                showNotification(`$${amount} ${methodName} withdrawal submitted! Processing fee: $${fee.toFixed(2)}. Net amount: $${netAmount.toFixed(2)}`);
                
                // Simulate status updates over time
                simulateWithdrawalProcessing(withdrawal);
                
            } catch (error) {
                showNotification('Withdrawal failed: ' + error.message, 'error');
            } finally {
                isProcessing = false;
                setButtonLoading('withdrawSubmitBtn', false);
            }
        }

        // Get method name
        function getMethodName(method) {
            const names = {
                'usdt': 'USDT',
                'btc': 'Bitcoin',
                'eth': 'Ethereum',
                'usdc': 'USDC',
                'bank': 'Bank Transfer'
            };
            return names[method] || method;
        }

        // Simple crypto address validation
        function isValidCryptoAddress(address, method) {
            if (!address || address.length < 10) return false;
            
            // Basic length checks for different cryptos
            switch(method) {
                case 'btc':
                    return address.length >= 26 && address.length <= 35;
                case 'eth':
                    return address.length === 42 && address.startsWith('0x');
                default:
                    return address.length >= 20; // Generic check
            }
        }

        // Simulate withdrawal processing
        function simulateWithdrawalProcessing(withdrawal) {
            // Update to processing after 30 seconds
            setTimeout(() => {
                withdrawal.status = 'processing';
                saveUserData();
                if (activeNav === 'withdrawalHistory') {
                    loadWithdrawalHistory();
                }
                showNotification(`Withdrawal ${withdrawal.id} is now processing`, 'info');
            }, 30000);
            
            // Randomly complete or fail after different times based on method
            let completionTime;
            if (withdrawal.method === 'Bank Transfer') {
                completionTime = 3600000 + Math.random() * 7200000; // 1-3 hours for bank
            } else {
                completionTime = 120000 + Math.random() * 180000; // 2-5 minutes for crypto
            }
            
            setTimeout(() => {
                const successRate = 0.9; // 90% success rate
                if (Math.random() < successRate) {
                    withdrawal.status = 'completed';
                    withdrawal.transactionId = 'TX' + Date.now() + Math.floor(Math.random() * 10000);
                    showNotification(`Withdrawal ${withdrawal.id} completed! Transaction ID: ${withdrawal.transactionId}`, 'success');
                } else {
                    withdrawal.status = 'failed';
                    user.usdt += withdrawal.amount; // Refund on failure
                    showNotification(`Withdrawal ${withdrawal.id} failed. Funds have been returned to your account.`, 'error');
                }
                saveUserData();
                updateUI();
                if (activeNav === 'withdrawalHistory') {
                    loadWithdrawalHistory();
                }
            }, completionTime);
        }

        // Load withdrawal history
        function loadWithdrawalHistory() {
            const historyBody = document.getElementById('withdrawalHistoryBody');
            const historyTable = document.getElementById('withdrawalHistoryTable');
            const emptyHistory = document.getElementById('emptyHistory');
            
            if (!user.withdrawalHistory || user.withdrawalHistory.length === 0) {
                historyTable.style.display = 'none';
                emptyHistory.style.display = 'block';
                return;
            }
            
            // Filter withdrawals based on active filter
            let filteredHistory = user.withdrawalHistory;
            if (activeFilter !== 'all') {
                filteredHistory = user.withdrawalHistory.filter(w => w.status === activeFilter);
            }
            
            if (filteredHistory.length === 0) {
                historyTable.style.display = 'none';
                emptyHistory.innerHTML = `
                    <i class="fas fa-filter"></i>
                    <h3>No ${activeFilter} withdrawals</h3>
                    <p>You don't have any ${activeFilter} withdrawals.</p>
                `;
                emptyHistory.style.display = 'block';
                return;
            }
            
            // Clear table
            historyBody.innerHTML = '';
            historyTable.style.display = 'table';
            emptyHistory.style.display = 'none';
            
            // Add rows
            filteredHistory.forEach(withdrawal => {
                const row = document.createElement('tr');
                
                // Status badge
                let statusBadge = '';
                switch (withdrawal.status) {
                    case 'pending':
                        statusBadge = '<span class="status-badge status-pending">Pending</span>';
                        break;
                    case 'processing':
                        statusBadge = '<span class="status-badge status-processing">Processing</span>';
                        break;
                    case 'completed':
                        statusBadge = '<span class="status-badge status-completed">Completed</span>';
                        break;
                    case 'failed':
                        statusBadge = '<span class="status-badge status-failed">Failed</span>';
                        break;
                }
                
                // Method icon
                let methodIcon = '';
                switch(withdrawal.method) {
                    case 'USDT':
                        methodIcon = '<i class="fab fa-usd" style="color: #26a17b;"></i>';
                        break;
                    case 'Bitcoin':
                        methodIcon = '<i class="fab fa-btc" style="color: #f7931a;"></i>';
                        break;
                    case 'Ethereum':
                        methodIcon = '<i class="fab fa-ethereum" style="color: #627eea;"></i>';
                        break;
                    case 'USDC':
                        methodIcon = '<i class="fas fa-coins" style="color: #2775ca;"></i>';
                        break;
                    case 'Bank Transfer':
                        methodIcon = '<i class="fas fa-university" style="color: #8b5cf6;"></i>';
                        break;
                }
                
                row.innerHTML = `
                    <td>${withdrawal.date}</td>
                    <td>$${withdrawal.amount.toFixed(2)}<br><small style="color: #94a3b8;">Net: $${withdrawal.netAmount.toFixed(2)}</small></td>
                    <td>${methodIcon} ${withdrawal.method}</td>
                    <td>${withdrawal.details}</td>
                    <td>${statusBadge}</td>
                    <td>${withdrawal.transactionId || '--'}</td>
                `;
                
                historyBody.appendChild(row);
            });
        }

        // Filter withdrawals
        function filterWithdrawals(status) {
            activeFilter = status;
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Reload history with filter
            loadWithdrawalHistory();
        }

        // Copy referral code
        function copyReferralCode() {
            const fullCode = `STC-${user.referralCode}`;
            
            navigator.clipboard.writeText(fullCode).then(() => {
                showNotification('Referral code copied to clipboard! Share it with friends to earn 50 STC each + 10% mining bonus.');
            }).catch(err => {
                // Fallback for browsers that don't support clipboard API
                const tempInput = document.createElement('input');
                tempInput.value = fullCode;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
                showNotification('Referral code copied to clipboard!');
            });
        }

        // UPDATED: Update UI with all new features
        function updateUI() {
            // Update referral code display
            document.getElementById('refCode').textContent = user.referralCode || 'X8Y9Z7';
            
            // Calculate STC value at current price
            const stcValue = user.stc * stcPrice;
            
            // Update balances
            document.getElementById('stcBalance').textContent = user.stc;
            document.getElementById('stcValue').textContent = stcValue.toFixed(2);
            document.getElementById('coinBalance').textContent = user.coins;
            document.getElementById('coinValue').textContent = (user.coins / 5000).toFixed(2); // 5000 coins = $1
            document.getElementById('usdtBalance').textContent = user.usdt.toFixed(2);
            document.getElementById('totalCoins').textContent = user.coins + ' coins';
            document.getElementById('totalMined').textContent = user.totalMined + ' STC';
            document.getElementById('refCount').textContent = user.referrals;
            document.getElementById('refEarnings').textContent = (user.referrals * 50) + ' STC'; // 50 STC per referral during launch
            
            // Update referral mining bonus
            document.getElementById('miningBonus').textContent = (user.referrerBonus || 0).toFixed(2) + ' STC';
            
            // Update price displays
            updatePriceDisplays();
            
            // Update coin progress
            updateCoinProgress();
            
            // Update user name and email
            if (user.loggedIn) {
                document.getElementById('userName').textContent = `Welcome, ${user.name}!`;
                document.getElementById('userEmail').textContent = user.email;
                
                // Update profile dropdown
                document.getElementById('userNameDisplay').textContent = user.name;
                if (user.photoURL) {
                    document.getElementById('userAvatar').src = user.photoURL;
                }
                
                // Update streak UI
                updateStreakUI();
            }
            
            // Update header buttons
            updateHeaderButtons();
        }

        // UPDATED: Save/Load user data with all new fields
        function saveUserData() {
            if (user.uid) {
                localStorage.setItem(`stc_user_${user.uid}`, JSON.stringify(user));
            }
        }

        function loadUserData() {
            if (user.uid) {
                const saved = localStorage.getItem(`stc_user_${user.uid}`);
                if (saved) {
                    try {
                        const savedData = JSON.parse(saved);
                        // Merge saved data with current user object
                        Object.assign(user, savedData);
                        
                        // Ensure dailyLogin object exists
                        if (!user.dailyLogin) {
                            user.dailyLogin = {
                                streak: 0,
                                lastLoginDate: "",
                                claimedToday: false,
                                streakHistory: [],
                                totalDaysLogged: 0,
                                highestStreak: 0
                            };
                        }
                        
                        // Ensure referrerBonus exists
                        if (!user.referrerBonus) {
                            user.referrerBonus = 0;
                        }
                    } catch (e) {
                        console.log('Error loading user data');
                    }
                }
            }
        }

        // UPDATED: Logout with all intervals cleared
        async function logout() {
            if (!auth) {
                showNotification('Authentication service is not available.', 'error');
                return;
            }
            
            try {
                // Stop mining
                if (user.mining) {
                    stopMining();
                }
                
                // Clear mining check interval
                if (miningCheckInterval) {
                    clearInterval(miningCheckInterval);
                }
                
                // Clear price fluctuation interval
                if (priceFluctuationInterval) {
                    clearInterval(priceFluctuationInterval);
                }
                
                // Clear daily login check interval
                if (dailyLoginCheckInterval) {
                    clearInterval(dailyLoginCheckInterval);
                }
                
                // Clear ad mining interval
                if (adMiningInterval) {
                    clearInterval(adMiningInterval);
                }
                
                // Clear ad display interval
                if (adDisplayInterval) {
                    clearInterval(adDisplayInterval);
                }
                
                // Sign out from Firebase
                await auth.signOut();
                
                // Reset user data
                user = {
                    uid: null,
                    loggedIn: false,
                    name: "",
                    email: "",
                    photoURL: "",
                    stc: 0,
                    coins: 0,
                    usdt: 0,
                    referrals: 0,
                    referralCode: "",
                    referredBy: null,
                    referrerBonus: 0,
                    totalMined: 0,
                    mining: false,
                    miningStartTime: null,
                    miningEndTime: null,
                    joinDate: "",
                    withdrawalHistory: [],
                    dailyLogin: {
                        streak: 0,
                        lastLoginDate: "",
                        claimedToday: false,
                        streakHistory: [],
                        totalDaysLogged: 0,
                        highestStreak: 0
                    }
                };
                
                updateUI();
                showPage('home');
                showNotification('Logged out successfully');
            } catch (error) {
                console.error("Logout Error:", error);
                showNotification('Logout failed: ' + error.message, 'error');
            }
        }

        // UPDATED: Handle logout from Firebase
        function handleLogout() {
            // Stop mining
            if (user.mining) {
                stopMining();
            }
            
            // Clear all intervals
            if (miningCheckInterval) {
                clearInterval(miningCheckInterval);
            }
            
            if (priceFluctuationInterval) {
                clearInterval(priceFluctuationInterval);
            }
            
            if (dailyLoginCheckInterval) {
                clearInterval(dailyLoginCheckInterval);
            }
            
            if (adMiningInterval) {
                clearInterval(adMiningInterval);
            }
            
            if (adDisplayInterval) {
                clearInterval(adDisplayInterval);
            }
            
            // Reset user data
            user = {
                uid: null,
                loggedIn: false,
                name: "",
                email: "",
                photoURL: "",
                stc: 0,
                coins: 0,
                usdt: 0,
                referrals: 0,
                referralCode: "",
                referredBy: null,
                referrerBonus: 0,
                totalMined: 0,
                mining: false,
                miningStartTime: null,
                miningEndTime: null,
                joinDate: "",
                withdrawalHistory: [],
                dailyLogin: {
                    streak: 0,
                    lastLoginDate: "",
                    claimedToday: false,
                    streakHistory: [],
                    totalDaysLogged: 0,
                    highestStreak: 0
                }
            };
            
            updateUI();
            if (activeNav !== 'home') {
                showPage('home');
            }
        }

        // Show legal modal
        function showLegalModal(type) {
            let title = '';
            let content = '';
            
            switch(type) {
                case 'terms':
                    title = 'Terms of Service';
                    content = `
                        <h3>STC-REWARDS Terms of Service</h3>
                        <p><strong>Last Updated:</strong> 2026</p>
                        
                        <h4>1. Acceptance of Terms</h4>
                        <p>Welcome to STC-REWARDS. By accessing or using our platform, you agree to be bound by these Terms of Service.</p>
                        
                        <h4>2. Platform Description</h4>
                        <p>STC-REWARDS is a Realstration platform launched in 2026 that allows users to earn STC tokens through various activities including watching ads, mining, and referral programs.</p>
                        
                        <h4>3. STC Token Information</h4>
                        <p>STC Token is a new utility token launched in 2026. The estimated price is $5 but fluctuates up and down based on market conditions. This is the first phase of mining distribution.</p>
                        
                        <h4>4. Withdrawal Policy</h4>
                        <p>Withdrawals are available in multiple cryptocurrencies and bank transfers. Minimum withdrawal is $5 USD (25000 coins).</p>
                    `;
                    break;
                case 'privacy':
                    title = 'Privacy Policy';
                    content = `
                        <h3>Privacy Policy</h3>
                        <p><strong>Last Updated:</strong> 2026</p>
                        
                        <h4>1. Information We Collect</h4>
                        <p>We collect information you provide directly, including your name, email address, and date of birth during registration for the STC 2026 launch.</p>
                    `;
                    break;
                case 'cookies':
                    title = 'Cookie Policy';
                    content = `
                        <h3>Cookie Policy</h3>
                        <p><strong>Last Updated:</strong> 2026</p>
                        
                        <h4>1. What Are Cookies</h4>
                        <p>Cookies are small text files stored on your device when you visit websites. Our platform uses browser localStorage which functions similarly to cookies.</p>
                    `;
                    break;
                case 'disclaimer':
                    title = 'Disclaimer';
                    content = `
                        <h3>Disclaimer</h3>
                        <p><strong>Last Updated:</strong> 2026</p>
                        
                        <h4>1. Realstration Platform</h4>
                        <p>STC-REWARDS is a Realstration platform launched in 2026. STC Token is a new project with its first phase of mining currently active.</p>
                        
                        <h4>2. Price Disclaimer</h4>
                        <p>STC Token has an estimated price of $5 but this fluctuates up and down based on market conditions. The price displayed is indicative and subject to change.</p>
                        
                        <h4>3. Mining Phase</h4>
                        <p>This is the first phase of STC mining. After mining completes, users will receive their STC token rewards.</p>
                        
                        <h4>4. Coin Value</h4>
                        <p>5000 coins = $1 USD. This represents real monetary value and earning is designed to be sustainable.</p>
                    `;
                    break;
            }
            
            // Create modal if it doesn't exist
            if (!document.getElementById('legalModal')) {
                const modalHTML = `
                    <div id="legalModal" class="modal">
                        <div class="modal-content" style="max-width: 700px; max-height: 80vh; overflow-y: auto;">
                            <button class="close-modal" onclick="closeModal('legalModal')">&times;</button>
                            <h2 class="form-title">${title}</h2>
                            <div id="legalModalContent" style="color: #cbd5e1; line-height: 1.6; font-size: 14px; margin-top: 15px;">
                                ${content}
                            </div>
                            <div style="text-align: center; margin-top: 20px;">
                                <button class="btn btn-primary" onclick="closeModal('legalModal')">Close</button>
                            </div>
                        </div>
                    </div>
                `;
                document.body.insertAdjacentHTML('beforeend', modalHTML);
            } else {
                document.getElementById('legalModalContent').innerHTML = content;
                document.querySelector('#legalModal .form-title').textContent = title;
            }
            
            document.getElementById('legalModal').classList.add('active');
            currentModal = 'legalModal';
        }

        // Set up referral URL sharing
        function setupReferralSharing() {
            const urlParams = new URLSearchParams(window.location.search);
            const refCode = urlParams.get('ref');
            if (refCode && !user.loggedIn) {
                localStorage.setItem('referral_code', refCode);
                showNotification('Referral code detected! Sign up to get 50 STC launch bonus + 10% mining bonus for referrer.', 'info');
            }
        }

        // Initialize referral sharing
        setupReferralSharing();
    </script>
</body>
</html>